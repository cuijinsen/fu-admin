var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,n=(e,t)=>{for(var s in t||(t={}))o.call(t,s)&&i(e,s,t[s]);if(a)for(var s of a(t))r.call(t,s)&&i(e,s,t[s]);return e},l=(e,a)=>t(e,s(a)),d=(e,t,s)=>new Promise(((a,o)=>{var r=e=>{try{n(s.next(e))}catch(t){o(t)}},i=e=>{try{n(s.throw(e))}catch(t){o(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,i);n((s=s.apply(e,t)).next())}));import{b as c,B as m}from"./index-b361c612.js";import{k as p,B as u}from"./useForm-39f6e704.js";import{cR as y,a as f,e as I,h,s as b,o as v,i as g,y as P,m as x,aG as D,E as j}from"./index-d32d699d.js";import{s as w}from"./index-2e5c6a76.js";const O=[{title:"字典项名称",dataIndex:"dictItemName",width:120},{title:"字典项编码",dataIndex:"dictItemCode",width:120},{title:"排序",dataIndex:"sort",width:80},{title:"状态",dataIndex:"sysStatus",width:80},{title:"备注",dataIndex:"remarks"}],S=[{field:"dictItemName",label:"字典项名称",component:"Input",componentProps:{placeholder:"请输入字典项名称"}},{field:"dictItemCode",label:"字典项编码",component:"Input",componentProps:{placeholder:"请输入字典项编码"}}],R=[{field:"dictItemName",label:"字典项名称",component:"Input",required:!0,componentProps:{placeholder:"请输入字典项名称",maxlength:100}},{field:"dictItemCode",label:"字典项编码",component:"Input",required:!0,componentProps:{placeholder:"请输入字典项编码",maxlength:100}},{field:"sort",label:"排序",component:"InputNumber",required:!0,defaultValue:"1",componentProps:{placeholder:"请输入排序",min:1}},{field:"sysStatus",label:"状态",component:"ApiRadioGroup",required:!0,componentProps:{api:w,params:{dictCode:"sys_status"}},defaultValue:"0"},{label:"备注",field:"remarks",component:"InputTextArea",componentProps:{placeholder:"请输入备注",maxlength:500}}];function C(e){return y.get({url:"/system/sysDictItem/selectSysDictItemWithPage",params:e})}function q(e){return y.post({url:"/system/sysDictItem/removeSysDictItem",params:e},{joinParamsToUrl:!0})}function N(e){return y.request({url:"/system/sysDictItem/exportSysDictItem",params:e,method:"get",responseType:"blob"},{isReturnNativeResponse:!0})}const _=f({__name:"FormModal",emits:["success","register"],setup(e,{emit:t}){const s=I((()=>h(a)?"编辑字典项":"新增字典项")),a=b(!1),o=b(),r=b(),{createMessage:i}=j(),[f,{setFieldsValue:w,resetFields:O,validate:S}]=p({labelWidth:100,schemas:R,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{span:24}}),[C,{setModalProps:q,closeModal:N}]=c((e=>d(this,null,(function*(){if(yield O(),q({confirmLoading:!1}),a.value=!!(null==e?void 0:e.isUpdate),r.value=null==e?void 0:e.dictId,h(a)){o.value=e.record.id;const s=yield(t={id:e.record.id},y.get({url:"/system/sysDictItem/getSysDictItem",params:t}));yield w(n({},s))}var t}))));function _(){return d(this,null,(function*(){try{const s=yield S();q({confirmLoading:!0}),h(a)?yield function(e){return y.post({url:"/system/sysDictItem/updateSysDictItem",params:e})}(l(n({},s),{id:o.value,dictId:r.value})):yield(e=l(n({},s),{dictId:r.value}),y.post({url:"/system/sysDictItem/addSysDictItem",params:e})),h(a)?i.success("编辑成功！"):i.success("新增成功！"),N(),t("success",{isUpdate:h(a),values:l(n({},s),{id:o.value,dictId:r.value})})}finally{q({confirmLoading:!1})}var e}))}return(e,t)=>(v(),g(h(m),D(e.$attrs,{onRegister:h(C),title:s.value,onOk:_}),{default:P((()=>[x(h(u),{onRegister:h(f)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}});export{_,O as c,N as e,C as f,q as r,S as s};
