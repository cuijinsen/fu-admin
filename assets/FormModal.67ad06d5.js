var v=Object.defineProperty,y=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var C=(u,o,e)=>o in u?v(u,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[o]=e,c=(u,o)=>{for(var e in o||(o={}))S.call(o,e)&&C(u,e,o[e]);if(h)for(var e of h(o))_.call(o,e)&&C(u,e,o[e]);return u},m=(u,o)=>y(u,x(o));var B=(u,o,e)=>new Promise((a,s)=>{var d=n=>{try{l(e.next(n))}catch(i){s(i)}},p=n=>{try{l(e.throw(n))}catch(i){s(i)}},l=n=>n.done?a(n.value):Promise.resolve(n.value).then(d,p);l((e=e.apply(u,o)).next())});import{a as D,B as M}from"./index.f1863477.js";import{B as O}from"./BasicForm.05ee908a.js";import{u as k}from"./useForm.f8fae255.js";import{bU as I,a as R,f as U,i as r,v as f,s as j,o as T,j as L,z as N,n as G,aB as q,G as z}from"./index.67a988db.js";import{v as V,b as W,c as $}from"./productApi.6e4a4bb1.js";import{T as g}from"./index.c9944a8c.js";import{a as H,s as J}from"./index.80508645.js";const ne=[{title:"\u5546\u54C1Id",dataIndex:"id",width:120},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"productName",width:120},{title:"\u5546\u54C1\u63CF\u8FF0",dataIndex:"productDesc",width:120},{title:"\u5546\u54C1\u56FE\u7247",dataIndex:"imgAddr",width:120},{title:"\u6B63\u5E38\u4EF7\u683C",dataIndex:"normalPrice",width:80},{title:"\u6253\u6298\u4EF7\u683C",dataIndex:"promotionPrice",width:80},{title:"\u5546\u54C1\u5E93\u5B58",dataIndex:"stock",width:80},{title:"\u662F\u5426\u4E0A\u67B6",dataIndex:"enableStatus",customRender:({record:u})=>{const e=~~u.enableStatus===1,a=e?"green":"red",s=e?"\u5DF2\u4E0A\u67B6":"\u672A\u4E0A\u67B6";return I(g,{color:a},()=>s)},width:80},{title:"\u5BA1\u6838\u72B6\u6001",dataIndex:"priority",width:80,customRender:({record:u})=>{const e=~~u.priority===1,a=e?"blue":"red",s=e?"\u5DF2\u5BA1\u6838":"\u672A\u5BA1\u6838";return I(g,{color:a},()=>s)}}],re=[{field:"productName",label:"\u5546\u54C1\u540D\u79F0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"}},{field:"enableStatus",label:"\u4E0A\u67B6\u72B6\u6001",component:"Select",componentProps:{placeholder:"\u8BF7\u9009\u62E9\u4E0A\u67B6\u72B6\u6001",options:[{label:"\u5DF2\u4E0A\u67B6",value:"1",key:"1"},{label:"\u5DF2\u4E0B\u67B6",value:"2",key:"2"}]}}],K=[{field:"id",label:"\u5546\u54C1Id",component:"Input",show:!1,componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1Id"}},{field:"productName",label:"\u5546\u54C1\u540D\u79F0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"}},{field:"productDesc",label:"\u5546\u54C1\u63CF\u8FF0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u63CF\u8FF0"}},{field:"imgAddr",label:"\u5546\u54C1\u56FE\u7247",component:"UploadImg",componentProps:({formModel:u})=>({uploadApi:H,value:u.imgAddr,btnText:"\u9009\u62E9\u56FE\u7247",btnProps:{preIcon:"ant-design:cloud-upload-outlined"},width:"150"})},{field:"normalPrice",label:"\u5546\u54C1\u539F\u4EF7",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u539F\u4EF7"}},{field:"promotionPrice",label:"\u5546\u54C1\u6298\u6263\u4EF7",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u6298\u6263\u4EF7"}},{field:"stock",label:"\u5546\u54C1\u5E93\u5B58",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5E93\u5B58"}},{field:"enableStatus",label:"\u4E0A\u67B6\u72B6\u6001",component:"ApiRadioGroup",required:!0,componentProps:{api:J,params:{dictCode:"fubao_product_enableStatus"}}},{field:"createByAid",label:"\u521B\u5EFA\u4EBA",component:"Input",slot:"createByAid",show:!1,componentProps:{}},{field:"priority",label:"\u5BA1\u6838\u72B6\u6001",component:"Input",required:!0,show:!1,componentProps:{value:"1"}}],Q=R({__name:"FormModal",emits:["success","register"],setup(u,{emit:o}){const e=U(()=>r(a)?"\u7F16\u8F91\u5546\u54C1":"\u65B0\u589E\u5546\u54C1"),a=f(!1),s=f(),d=f(),{createMessage:p}=z(),[l,{setFieldsValue:n,resetFields:i,validate:E,updateSchema:X}]=k({labelWidth:100,schemas:K,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{lg:12,md:24}}),[w,{setModalProps:F,closeModal:A}]=D(t=>B(this,null,function*(){if(yield i(),F({confirmLoading:!1}),a.value=!!(t!=null&&t.isUpdate),d.value=t==null?void 0:t.record.deptId,r(a)){s.value=t.record.id;const b=yield V({id:t.record.id});yield n(c({},b)),n({createByAid:j().getUserInfo.userId})}}));function P(){return B(this,null,function*(){try{const t=yield E();F({confirmLoading:!0}),r(a)?yield $(m(c({},t),{id:s.value})):yield W(m(c({},t),{shopId:d.value})),r(a)?p.success("\u7F16\u8F91\u6210\u529F\uFF01"):p.success("\u65B0\u589E\u6210\u529F\uFF01"),A(),o("success",{isUpdate:r(a),values:m(c({},t),{id:s.value})})}finally{F({confirmLoading:!1})}})}return(t,b)=>(T(),L(r(M),q(t.$attrs,{destroyOnClose:"",onRegister:r(w),title:r(e),onOk:P,width:"900px"}),{default:N(()=>[G(r(O),{onRegister:r(l)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});var le=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{le as F,Q as _,ne as c,re as s};
