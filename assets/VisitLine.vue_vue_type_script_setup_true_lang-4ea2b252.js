var e=(e,t,a)=>new Promise(((l,o)=>{var r=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,i);s((a=a.apply(e,t)).next())}));import{u as t}from"./useECharts-8dd670ef.js";import{d as a}from"./largeScreenApi-de23999b.js";import{a as l,s as o,J as r,r as i,K as s,o as n,f as m,l as u,bp as c}from"./index-d32d699d.js";const d=l({__name:"VisitLine",props:{width:{type:String,default:"100%"},height:{type:String,default:"calc(100vh - 80px)"},startTime:{type:Object},endTime:{type:Object}},setup(l){const d=l;let p=o(),y=o(),f=o(),h=o(),b=o();const v=o(null),{setOptions:g,echarts:x}=t(v);function S(){return e(this,null,(function*(){yield function(){return e(this,null,(function*(){p.value=yield a({deptId:i().getUserInfo.deptId,month:d.startTime?d.startTime.format("YYYY-MM-DD HH:mm:ss"):d.endTime?d.endTime.format("YYYY-MM-DD HH:mm:ss"):null}),y.value=p.value.map((e=>e.day)),f.value=p.value.map((e=>e.payCount)),h.value=p.value.map((e=>e.allCount)),b.value=p.value.map((e=>e.conversionRate))}))}(),g({backgroundColor:"#0f375f",tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{show:!0,backgroundColor:"#333"}},formatter:function(e){let t=e[0].name+"<br/>";for(let a=0;a<e.length;a++)"转换率"===e[a].seriesName?t+=e[a].seriesName+": "+e[a].value.toFixed(2)+"%<br/>":t+=e[a].seriesName+": "+e[a].value+"<br/>";return t}},legend:{data:["领取人数","创建人数"],textStyle:{color:"#ccc"}},xAxis:{data:y.value,axisLine:{lineStyle:{color:"#ccc"}}},yAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#ccc"}}},series:[{name:"领取人数",type:"line",smooth:!0,showAllSymbol:"auto",symbol:"emptyCircle",symbolSize:15,data:f.value},{name:"创建人数",type:"line",smooth:!0,showAllSymbol:"auto",symbol:"emptyCircle",symbolSize:15,data:h.value},{name:"转换率",type:"bar",barGap:"-100%",barWidth:10,itemStyle:{color:new x.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(20,200,212,0.5)"},{offset:.2,color:"rgba(20,200,212,0.2)"},{offset:1,color:"rgba(20,200,212,0)"}])},z:-12,data:b.value}]})}))}return r((()=>e(this,null,(function*(){p.value=yield a({deptId:i().getUserInfo.deptId,month:d.startTime?d.startTime.format("YYYY-MM-DD HH:mm:ss"):null}),y.value=p.value.map((e=>e.day)),f.value=p.value.map((e=>e.payCount)),h.value=p.value.map((e=>e.allCount)),b.value=p.value.map((e=>e.conversionRate)),g({backgroundColor:"#0f375f",tooltip:{axisPointer:{type:"shadow",label:{show:!0,backgroundColor:"#333"}},formatter:function(e){let t=e[0].name+"<br/>";for(let a=0;a<e.length;a++)"转换率"===e[a].seriesName?t+=e[a].seriesName+": "+e[a].value.toFixed(2)+"%<br/>":t+=e[a].seriesName+": "+e[a].value+"<br/>";return t},trigger:"axis"},legend:{data:["领取人数","创建人数"],textStyle:{color:"#ccc"}},xAxis:{data:y.value,axisLine:{lineStyle:{color:"#ccc"}}},yAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#ccc"}}},series:[{name:"领取人数",type:"line",smooth:!0,showAllSymbol:"auto",symbol:"emptyCircle",symbolSize:15,data:f.value},{name:"创建人数",type:"line",smooth:!0,showAllSymbol:"auto",symbol:"emptyCircle",symbolSize:15,data:h.value},{name:"转换率",type:"bar",barGap:"-100%",barWidth:10,itemStyle:{color:new x.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(20,200,212,0.5)"},{offset:.2,color:"rgba(20,200,212,0.2)"},{offset:1,color:"rgba(20,200,212,0)"}])},z:-12,data:b.value}]})})))),s((()=>d.endTime),(()=>{S()})),s((()=>d.startTime),(()=>{S()})),(e,t)=>(n(),m("div",null,[u("div",{ref_key:"chartRef",ref:v,style:c({height:l.height,width:l.width})},null,4)]))}});export{d as _};
