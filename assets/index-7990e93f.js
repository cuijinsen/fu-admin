var e=(e,t,s)=>new Promise(((o,i)=>{var n=e=>{try{a(s.next(e))}catch(t){i(t)}},r=e=>{try{a(s.throw(e))}catch(t){i(t)}},a=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,r);a((s=s.apply(e,t)).next())}));import{a as t,s,bs as o,aF as i,bT as n,o as r,f as a,m as d,y as c,w as l,i as u,z as m,h as p,t as f,f6 as j,j as y,E as b}from"./index-d32d699d.js";import{T as g}from"./index-280a19eb.js";import{u as x,B as C}from"./useTable-ba3fb261.js";import{T as h}from"./useForm-39f6e704.js";import{u as _}from"./index-b361c612.js";import{f as w,c as v,s as S,_ as k,r as I,e as F,a as O}from"./FormModal.vue_vue_type_script_setup_true_lang-9b4f73b4.js";import{s as T}from"./index-2e5c6a76.js";import{a as R}from"./download-29600a9b.js";import"./index-428eee78.js";import"./eagerComputed-b16e681c.js";import"./css-49036a2d.js";import"./fromPairs-c5e23fef.js";import"./iconUtil-b885d1ac.js";import"./index-22735145.js";import"./index-e84e313c.js";import"./createForOfIteratorHelper-19a6e609.js";import"./index-da1a1de3.js";import"./index-64da741e.js";import"./scrollTo-7d931d9a.js";import"./index-ceb1e509.js";import"./index-e9d5eda1.js";import"./index-2887dac0.js";import"./useSize-e28be3fa.js";import"./useWindowSizeFn-6acabc85.js";import"./useContentViewHeight-295eef1a.js";import"./ArrowLeftOutlined-f42bc447.js";import"./index-9c0d62a6.js";import"./transButton-c20bc4d9.js";import"./index-706c8391.js";import"./index-bf8f159c.js";import"./index-ee500efb.js";import"./get-8e454bdf.js";import"./index-b4d18824.js";import"./sortable.esm-871e648d.js";import"./RedoOutlined-481f10d7.js";import"./FullscreenOutlined-091fbcf5.js";import"./index-a72363e5.js";import"./index-f7867750.js";import"./index-6cd0fcd2.js";import"./index-06c8a48f.js";import"./index-cd646f4b.js";import"./_baseIteratee-b178d67d.js";import"./index-fe305bf5.js";import"./index-476a8598.js";import"./useRefs-b0536d84.js";import"./index-406c2228.js";import"./index-8e2feec8.js";import"./uniqBy-19fec0f2.js";const B=t({__name:"index",setup(t){const B=s([]);o((()=>e(this,null,(function*(){B.value=yield T({dictCode:"sys_status"})}))));const{createMessage:U,createConfirm:P}=b(),[z,{reload:M,getForm:E}]=x({title:"参数列表",api:w,rowKey:"id",columns:v,formConfig:{baseColProps:{sm:24,lg:6},labelWidth:90,schemas:S,autoSubmitOnEnter:!0,resetButtonOptions:{preIcon:"ant-design:delete-outlined"},submitButtonOptions:{preIcon:"ant-design:search-outlined"}},showIndexColumn:!1,useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{auth:["system:sysConfig:updateSysConfig","system:sysConfig:removeSysConfig"],width:80,title:"操作",dataIndex:"action"}}),[H,{openModal:V}]=_();function W(){V(!0,{isUpdate:!1})}function q(e){V(!0,{record:e,isUpdate:!0})}function A(t){return e(this,null,(function*(){yield I({ids:t.id}),U.success("删除成功！"),yield M()}))}function K(){return e(this,null,(function*(){P({iconType:"warning",title:"提示",content:"确认导出？",onOk:()=>e(this,null,(function*(){const e=E().getFieldsValue(),t=yield F(e),s=t.data,o=t.headers["content-disposition"].split(";")[1].split("=")[1],i=decodeURIComponent(escape(o));R(s,i)}))})}))}function L(){return e(this,null,(function*(){P({iconType:"warning",title:"提示",content:"确认刷新所有参数缓存？",onOk:()=>e(this,null,(function*(){yield O(),U.success("刷新成功！")}))})}))}function D(t){return e(this,arguments,(function*({isUpdate:e,values:t}){yield M()}))}return(e,t)=>{const s=i("a-button"),o=n("auth");return r(),a("div",null,[d(p(C),{onRegister:p(z)},{toolbar:c((()=>[l((r(),u(s,{preIcon:"ant-design:plus-outlined",type:"primary",onClick:W},{default:c((()=>[m("新增 ")])),_:1})),[[o,["system:sysConfig:addSysConfig"]]]),l((r(),u(s,{color:"warning",preIcon:"ant-design:download-outlined",onClick:K},{default:c((()=>[m("导出 ")])),_:1})),[[o,["system:sysConfig:exportSysConfig"]]]),l((r(),u(s,{color:"success",preIcon:"ant-design:redo-outlined",onClick:L},{default:c((()=>[m("刷新缓存 ")])),_:1})),[[o,["system:sysConfig:refreshSysConfigCache"]]])])),bodyCell:c((({column:e,record:t})=>["status"===e.key?(r(),u(p(g),{key:0,color:"0"===t.status?"processing":"error"},{default:c((()=>[m(f(p(j)(B.value,t.status)),1)])),_:2},1032,["color"])):y("",!0),"action"===e.key?(r(),u(p(h),{key:1,actions:[{auth:"system:sysConfig:updateSysConfig",icon:"clarity:note-edit-line",tooltip:"编辑",onClick:q.bind(null,t)},{auth:["system:sysConfig:removeSysConfig"],icon:"ant-design:delete-outlined",tooltip:"删除",color:"error",popConfirm:{title:"是否确认删除",confirm:A.bind(null,t)}}]},null,8,["actions"])):y("",!0)])),_:1},8,["onRegister"]),d(k,{onRegister:p(H),onSuccess:D},null,8,["onRegister"])])}}});export{B as default};
