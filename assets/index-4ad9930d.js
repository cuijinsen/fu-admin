var e=Object.defineProperty,t=(t,n,o)=>(((t,n,o)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o})(t,"symbol"!=typeof n?n+"":n,o),o);import{m as n,aZ as o,a as i,v as a,K as r,s as l,J as s,e as c,S as u,fs as p,c8 as d,f9 as f,V as v,_ as m,Q as y,R as h,er as g,a4 as b,Y as C,cf as x,at as T,X as w,Z as S,cq as k,ah as O,c7 as j,F as N,D as E,cl as P,bn as A,cW as R,dp as D,ft as B,b as I,cM as z,h as M,L,aF as _,o as H,i as K,y as $,f as F,aI as U,p as W,l as V,bp as J,z as X,t as Z,j as q,fu as Q,cR as Y,br as G,r as ee,fv as te,E as ne}from"./index-d32d699d.js";import{B as oe}from"./index-f7867750.js";import{T as ie}from"./index-80ea7d72.js";import{A as ae}from"./index-2887dac0.js";import{L as re}from"./index-86e946d6.js";import"./index-cd646f4b.js";import{T as le}from"./index-280a19eb.js";import"./index-9c0d62a6.js";import{T as se}from"./transButton-c20bc4d9.js";import{C as ce}from"./CopyOutlined-6edd223e.js";import"./index-6cd0fcd2.js";import"./useRefs-b0536d84.js";import"./useSize-e28be3fa.js";import"./eagerComputed-b16e681c.js";const ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){de(e,t,n[t])}))}return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=function(e,t){var i=pe({},e,t.attrs);return n(o,pe({},i,{icon:ue}),null)};fe.displayName="EnterOutlined",fe.inheritAttrs=!1;const ve=fe;const me=i({compatConfig:{MODE:3},name:"Editable",props:{prefixCls:String,value:String,maxlength:Number,autoSize:{type:[Boolean,Object]},onSave:Function,onCancel:Function,onEnd:Function,onChange:Function,originContent:String,direction:String},setup:function(e,t){var o=t.emit,i=t.slots,f=a({current:e.value||"",lastKeyCode:void 0,inComposition:!1,cancelFlag:!1});r((function(){return e.value}),(function(e){f.current=e}));var v=l();function m(e){v.value=e}function y(e){var t=e.target.value;f.current=t.replace(/[\r\n]/g,""),o("change",f.current)}function h(){f.inComposition=!0}function g(){f.inComposition=!1}function b(e){var t=e.keyCode;t===d.ENTER&&e.preventDefault(),f.inComposition||(f.lastKeyCode=t)}function C(t){var n=t.keyCode,i=t.ctrlKey,a=t.altKey,r=t.metaKey,l=t.shiftKey;f.lastKeyCode!==n||f.inComposition||i||a||r||l||(n===d.ENTER?(T(),o("end")):n===d.ESC&&(f.current=e.originContent,o("cancel")))}function x(){T()}function T(){o("save",f.current.trim())}s((function(){if(v.value){var e,t=null===(e=v.value)||void 0===e?void 0:e.resizableTextArea,n=null==t?void 0:t.textArea;n.focus();var o=n.value.length;n.setSelectionRange(o,o)}}));var w=c((function(){var t;return u(t={},"".concat(e.prefixCls),!0),u(t,"".concat(e.prefixCls,"-edit-content"),!0),u(t,"".concat(e.prefixCls,"-rtl"),"rtl"===e.direction),t}));return function(){return n("div",{class:w.value},[n(p,{ref:m,maxlength:e.maxlength,value:f.current,onChange:y,onKeydown:b,onKeyup:C,onCompositionstart:h,onCompositionend:g,onBlur:x,rows:1,autoSize:void 0===e.autoSize||e.autoSize},null),i.enterIcon?i.enterIcon({className:"".concat(e.prefixCls,"-edit-content-confirm")}):n(ve,{class:"".concat(e.prefixCls,"-edit-content-confirm")},null)])}}});var ye,he={padding:0,margin:0,display:"inline",lineHeight:"inherit"};function ge(e,t){e.setAttribute("aria-hidden","true");var n,o=window.getComputedStyle(t),i=(n=o,Array.prototype.slice.apply(n).map((function(e){return"".concat(e,": ").concat(n.getPropertyValue(e),";")})).join(""));e.setAttribute("style",i),e.style.position="fixed",e.style.left="0",e.style.height="auto",e.style.minHeight="auto",e.style.maxHeight="auto",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.borderTopWidth="0",e.style.borderBottomWidth="0",e.style.top="-999999px",e.style.zIndex="-1000",e.style.textOverflow="clip",e.style.whiteSpace="normal",e.style.webkitLineClamp="none"}const be=function(e,t,o,i,a){ye||((ye=document.createElement("div")).setAttribute("aria-hidden","true"),document.body.appendChild(ye));var r=t.rows,l=t.suffix,s=void 0===l?"":l,c=function(e){var t=document.createElement("div");ge(t,e),t.appendChild(document.createTextNode("text")),document.body.appendChild(t);var n=t.getBoundingClientRect().height;return document.body.removeChild(t),n}(e),u=Math.round(c*r*100)/100;ge(ye,e);var p=f({render:function(){return n("div",{style:he},[n("span",{style:he},[o,s]),n("span",{style:he},[i])])}});function d(){return Math.round(100*ye.getBoundingClientRect().height)/100-.1<=u}if(p.mount(ye),d())return p.unmount(),{content:o,text:ye.innerHTML,ellipsis:!1};var v=Array.prototype.slice.apply(ye.childNodes[0].childNodes[0].cloneNode(!0).childNodes).filter((function(e){var t=e.nodeType,n=e.data;return 8!==t&&""!==n})),m=Array.prototype.slice.apply(ye.childNodes[0].childNodes[1].cloneNode(!0).childNodes);p.unmount();var y=[];ye.innerHTML="";var h=document.createElement("span");ye.appendChild(h);var g=document.createTextNode(a+s);function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=Math.floor((n+o)/2),r=t.slice(0,a);if(e.textContent=r,n>=o-1)for(var l=o;l>=n;l-=1){var s=t.slice(0,l);if(e.textContent=s,d()||!s)return l===t.length?{finished:!1,vNode:t}:{finished:!0,vNode:s}}return d()?b(e,t,a,o,a):b(e,t,n,a,i)}function C(e){var t;if(3===e.nodeType){var n=e.textContent||"",o=document.createTextNode(n);return t=o,h.insertBefore(t,g),b(o,n)}return{finished:!1,vNode:null}}return h.appendChild(g),m.forEach((function(e){ye.appendChild(e)})),v.some((function(e){var t=C(e),n=t.finished,o=t.vNode;return o&&y.push(o),n})),{content:y,text:ye.innerHTML,ellipsis:!0}};var Ce=["prefixCls","class","direction","component"];const xe=i({name:"ATypography",inheritAttrs:!1,props:{prefixCls:String,direction:String,component:String},setup:function(e,t){var o=t.slots,i=t.attrs,a=v("typography",e),r=a.prefixCls,l=a.direction;return function(){var t,a=m(m({},e),i);a.prefixCls,a.class,a.direction;var s=a.component,c=void 0===s?"article":s,p=y(a,Ce);return n(c,m({class:h(r.value,u({},"".concat(r.value,"-rtl"),"rtl"===l.value),i.class)},p),{default:function(){return[null===(t=o.default)||void 0===t?void 0:t.call(o)]}})}}});const Te=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}};var we={"text/plain":"Text","text/html":"Url",default:"Text"};function Se(e,t){var n,o,i,a,r,l=!1;t||(t={});t.debug;try{if(o=Te(),i=document.createRange(),a=document.getSelection(),(r=document.createElement("span")).textContent=e,r.style.all="unset",r.style.position="fixed",r.style.top=0,r.style.clip="rect(0, 0, 0, 0)",r.style.whiteSpace="pre",r.style.webkitUserSelect="text",r.style.MozUserSelect="text",r.style.msUserSelect="text",r.style.userSelect="text",r.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){window.clipboardData.clearData();var o=we[t.format]||we.default;window.clipboardData.setData(o,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(r),i.selectNodeContents(r),a.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(s){try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),l=!0}catch(c){n=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(n,e)}}finally{a&&("function"==typeof a.removeRange?a.removeRange(i):a.removeAllRanges()),r&&document.body.removeChild(r),o()}return l}const ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){je(e,t,n[t])}))}return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=function(e,t){var i=Oe({},e,t.attrs);return n(o,Oe({},i,{icon:ke}),null)};Ne.displayName="EditOutlined",Ne.inheritAttrs=!1;const Ee=Ne;var Pe=["type","disabled","content","class","style"],Ae=g("webkitLineClamp"),Re=g("textOverflow"),De=function(){return{editable:{type:[Boolean,Object],default:void 0},copyable:{type:[Boolean,Object],default:void 0},prefixCls:String,component:String,type:String,disabled:{type:Boolean,default:void 0},ellipsis:{type:[Boolean,Object],default:void 0},code:{type:Boolean,default:void 0},mark:{type:Boolean,default:void 0},underline:{type:Boolean,default:void 0},delete:{type:Boolean,default:void 0},strong:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},content:String,"onUpdate:content":Function}};const Be=i({compatConfig:{MODE:3},name:"Base",inheritAttrs:!1,props:De(),setup:function(e,t){var o=t.slots,i=t.attrs,p=t.emit,d=v("typography",e),f=d.prefixCls,h=d.direction,g=a({copied:!1,ellipsisText:"",ellipsisContent:null,isEllipsis:!1,expanded:!1,clientRendered:!1,expandStr:"",copyStr:"",copiedStr:"",editStr:"",copyId:void 0,rafId:void 0,prevProps:void 0,originContent:""}),B=l(),I=l(),z=c((function(){var t=e.ellipsis;return t?m({rows:1,expandable:!1},"object"===b(t)?t:null):{}}));function M(e){var t=z.value.onExpand;g.expanded=!0,null==t||t(e)}function L(t){t.preventDefault(),g.originContent=e.content,X(!0)}function _(e){H(e),X(!1)}function H(t){var n=F.value.onChange;t!==e.content&&(p("update:content",t),null==n||n(t))}function K(){var e,t;null===(e=(t=F.value).onCancel)||void 0===e||e.call(t),X(!1)}function $(t){t.preventDefault(),t.stopPropagation();var n,o,i=e.copyable,a=m({},"object"===b(i)?i:null);void 0===a.text&&(a.text=e.ellipsis||e.editable?e.content:null===(n=B.value)||void 0===n||null===(o=n.$el)||void 0===o?void 0:o.innerText),Se(a.text||""),g.copied=!0,T((function(){a.onCopy&&a.onCopy(),g.copyId=setTimeout((function(){g.copied=!1}),3e3)}))}s((function(){g.clientRendered=!0})),C((function(){clearTimeout(g.copyId),x.cancel(g.rafId)})),r([function(){return z.value.rows},function(){return e.content}],(function(){T((function(){Z()}))}),{flush:"post",deep:!0,immediate:!0}),w((function(){void 0===e.content&&(S(!e.editable,"Typography","When `editable` is enabled, please use `content` instead of children"),S(!e.ellipsis,"Typography","When `ellipsis` is enabled, please use `content` instead of children"))}));var F=c((function(){var t=e.editable;return t?m({},"object"===b(t)?t:null):{editing:!1}})),U=k(!1,{value:c((function(){return F.value.editing}))}),W=O(U,2),V=W[0],J=W[1];function X(e){var t=F.value.onStart;e&&t&&t(),J(e)}function Z(){x.cancel(g.rafId),g.rafId=x((function(){Q()}))}r(V,(function(e){var t;e||(null===(t=I.value)||void 0===t||t.focus())}),{flush:"post"});var q=c((function(){var t=z.value,n=t.rows,o=t.expandable,i=t.suffix,a=t.onEllipsis,r=t.tooltip;return!i&&!r&&(!(e.editable||e.copyable||o||a)&&(1===n?Re:Ae))})),Q=function(){var t,n,o=g.ellipsisText,i=g.isEllipsis,a=z.value,r=a.rows,l=a.suffix,s=a.onEllipsis;if(r&&!(r<0)&&null!==(t=B.value)&&void 0!==t&&t.$el&&!g.expanded&&void 0!==e.content&&!q.value){var c=be(null===(n=B.value)||void 0===n?void 0:n.$el,{rows:r,suffix:l},e.content,te(!0),"..."),u=c.content,p=c.text,d=c.ellipsis;o===p&&g.isEllipsis===d||(g.ellipsisText=p,g.ellipsisContent=u,g.isEllipsis=d,i!==d&&s&&s(d))}};function Y(e){var t=z.value,i=t.expandable,a=t.symbol;if(!i)return null;if(!e&&(g.expanded||!g.isEllipsis))return null;var r=(o.ellipsisSymbol?o.ellipsisSymbol():a)||g.expandStr;return n("a",{key:"expand",class:"".concat(f.value,"-expand"),onClick:M,"aria-label":g.expandStr},[r])}function G(){if(e.editable){var t=e.editable,i=t.tooltip,a=t.triggerType,r=void 0===a?["icon"]:a,l=o.editableIcon?o.editableIcon():n(Ee,{role:"button"},null),s=o.editableTooltip?o.editableTooltip():g.editStr,c="string"==typeof s?s:"";return-1!==r.indexOf("icon")?n(A,{key:"edit",title:!1===i?"":s},{default:function(){return[n(se,{ref:I,class:"".concat(f.value,"-edit"),onClick:L,"aria-label":c},{default:function(){return[l]}})]}}):null}}function ee(){if(e.copyable){var t=e.copyable.tooltip,i=g.copied?g.copiedStr:g.copyStr,a=o.copyableTooltip?o.copyableTooltip({copied:g.copied}):i,r="string"==typeof a?a:"",l=g.copied?n(D,null,null):n(ce,null,null),s=o.copyableIcon?o.copyableIcon({copied:!!g.copied}):l;return n(A,{key:"copy",title:!1===t?"":a},{default:function(){return[n(se,{class:["".concat(f.value,"-copy"),u({},"".concat(f.value,"-copy-success"),g.copied)],onClick:$,"aria-label":r},{default:function(){return[s]}})]}})}}function te(e){return[Y(e),G(),ee()].filter((function(e){return e}))}return function(){var t,a,r,l,s,c,p,d=F.value.triggerType,v=void 0===d?["icon"]:d,b=e.ellipsis||e.editable?void 0!==e.content?e.content:null===(t=o.default)||void 0===t?void 0:t.call(o):o.default?o.default():e.content;return V.value?(a=i.class,r=i.style,l=F.value,s=l.maxlength,c=l.autoSize,p=l.onEnd,n(me,{class:a,style:r,prefixCls:f.value,value:e.content,originContent:g.originContent,maxlength:s,autoSize:c,onSave:_,onChange:H,onCancel:K,onEnd:p,direction:h.value},{enterIcon:o.editableEnterIcon})):n(R,{componentName:"Text",children:function(t){var a,r=m(m({},e),i),l=r.type,s=r.disabled;r.content;var c=r.class,p=r.style,d=y(r,Pe),C=z.value,x=C.rows,T=C.suffix,w=C.tooltip,S=t.edit,k=t.copy,O=t.copied,R=t.expand;g.editStr=S,g.copyStr=k,g.copiedStr=O,g.expandStr=R;var D=j(d,["prefixCls","editable","copyable","ellipsis","mark","code","delete","underline","strong","keyboard","onUpdate:content"]),I=q.value,M=1===x&&I,_=x&&x>1&&I,H=b;if(x&&g.isEllipsis&&!g.expanded&&!I){var K,$=d.title,F=$||"";$||"string"!=typeof b&&"number"!=typeof b||(F=String(b)),F=null===(K=F)||void 0===K?void 0:K.slice(String(g.ellipsisContent||"").length),H=n(N,null,[E(g.ellipsisContent),n("span",{title:F,"aria-hidden":"true"},["..."]),T])}else H=n(N,null,[b,T]);H=function(e,t){var o=e.mark,i=e.code,a=e.underline,r=e.delete,l=e.strong,s=e.keyboard,c=t;function u(e,t){if(e){var o=c;c=n(t,null,{default:function(){return[o]}})}}return u(l,"strong"),u(a,"u"),u(r,"del"),u(i,"code"),u(o,"mark"),u(s,"kbd"),c}(e,H);var U=w&&x&&g.isEllipsis&&!g.expanded&&!I,W=o.ellipsisTooltip?o.ellipsisTooltip():w;return n(P,{onResize:Z,disabled:!x},{default:function(){return[n(xe,m({ref:B,class:[(a={},u(a,"".concat(f.value,"-").concat(l),l),u(a,"".concat(f.value,"-disabled"),s),u(a,"".concat(f.value,"-ellipsis"),x),u(a,"".concat(f.value,"-single-line"),1===x&&!g.isEllipsis),u(a,"".concat(f.value,"-ellipsis-single-line"),M),u(a,"".concat(f.value,"-ellipsis-multiple-line"),_),a),c],style:m(m({},p),{},{WebkitLineClamp:_?x:void 0}),"aria-label":undefined,direction:h.value,onClick:-1!==v.indexOf("text")?L:function(){}},D),{default:function(){return[U?n(A,{title:!0===w?b:W},{default:function(){return[n("span",null,[H])]}}):H,te()]}})]}})}},null)}}});var Ie=["ellipsis","rel"],ze=function(e,t){var o=t.slots,i=t.attrs,a=m(m({},e),i),r=a.ellipsis,l=a.rel,s=y(a,Ie);S("object"!==b(r),"Typography.Link","`ellipsis` only supports boolean value.");var c=m(m({},s),{},{rel:void 0===l&&"_blank"===s.target?"noopener noreferrer":l,ellipsis:!!r,component:"a"});return delete c.navigate,n(Be,c,o)};ze.displayName="ATypographyLink",ze.inheritAttrs=!1,ze.props=j(m(m({},De()),{},{ellipsis:{type:Boolean,default:void 0}}),["component"]);const Me=ze;var Le=function(e,t){var o=t.slots,i=t.attrs,a=m(m({},e),{},{component:"div"},i);return n(Be,a,o)};Le.displayName="ATypographyParagraph",Le.inheritAttrs=!1,Le.props=j(De(),["component"]);const _e=Le;var He=function(e,t){var o=t.slots,i=t.attrs,a=e.ellipsis;S("object"!==b(a)||!a||!("expandable"in a)&&!("rows"in a),"Typography.Text","`ellipsis` do not support `expandable` or `rows` props.");var r=m(m({},e),{},{ellipsis:a&&"object"===b(a)?j(a,["expandable","rows"]):a,component:"span"},i);return n(Be,r,o)};He.displayName="ATypographyText",He.inheritAttrs=!1,He.props=m(m({},j(De(),["component"])),{},{ellipsis:{type:[Boolean,Object],default:void 0}});const Ke=He;var $e=["level"],Fe=B(1,2,3,4,5),Ue=function(e,t){var o,i=t.slots,a=t.attrs,r=e.level,l=void 0===r?1:r,s=y(e,$e);-1!==Fe.indexOf(l)?o="h".concat(l):(S(!1,"Typography","Title only accept `1 | 2 | 3 | 4 | 5` as `level` value."),o="h1");var c=m(m({},s),{},{component:o},a);return n(Be,c,i)};Ue.displayName="ATypographyTitle",Ue.inheritAttrs=!1,Ue.props=m(m({},j(De(),["component","strong"])),{},{level:Number});const We=Ue;xe.Text=Ke,xe.Title=We,xe.Paragraph=_e,xe.Link=Me,xe.Base=Be,xe.install=function(e){return e.component(xe.name,xe),e.component(xe.Text.displayName,Ke),e.component(xe.Title.displayName,We),e.component(xe.Paragraph.displayName,_e),e.component(xe.Link.displayName,Me),e};const Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"}}]},name:"bell",theme:"outlined"};function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){Xe(e,t,n[t])}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ze=function(e,t){var i=Je({},e,t.attrs);return n(o,Je({},i,{icon:Ve}),null)};Ze.displayName="BellOutlined",Ze.inheritAttrs=!1;const qe=Ze,Qe=[{key:"1",name:"通知",list:[]},{key:"2",name:"消息",list:[]},{key:"3",name:"待办",list:[]}],Ye=i({components:{[ae.name]:ae,[re.name]:re,[re.Item.name]:re.Item,AListItemMeta:re.Item.Meta,ATypographyParagraph:_e,[le.name]:le},props:{list:{type:Array,default:()=>[]},pageSize:{type:[Boolean,Number],default:5},currentPage:{type:Number,default:1},titleRows:{type:Number,default:1},descRows:{type:Number,default:2},onTitleClick:{type:Function}},emits:["update:currentPage"],setup(e,{emit:t}){const{prefixCls:n}=I("header-notify-list"),o=l(e.currentPage||1),i=c((()=>{const{pageSize:t,list:n}=e;if(!1===t)return[];let i=z(t)?t:5;return n.slice(i*(M(o)-1),i*M(o))}));r((()=>e.currentPage),(e=>{o.value=e}));const a=c((()=>!!e.onTitleClick));return{prefixCls:n,getPagination:c((()=>{const{list:n,pageSize:i}=e;return!!(i>0&&n&&n.length>i)&&{total:n.length,pageSize:i,current:M(o),onChange(e){o.value=e,t("update:currentPage",e)}}})),getData:i,handleTitleClick:function(t){e.onTitleClick&&e.onTitleClick(t)},isTitleClickable:a}}}),Ge={class:"title"},et={key:0,class:"extra"},tt={key:1},nt={key:0,class:"description"},ot={class:"datetime"};const it=L(Ye,[["render",function(e,t,o,i,a,r){const l=_("a-typography-paragraph"),s=_("a-tag"),c=_("a-avatar"),u=_("a-list-item-meta"),p=_("a-list-item"),d=_("a-list");return H(),K(d,{class:W(e.prefixCls),pagination:e.getPagination,bordered:""},{default:$((()=>[(H(!0),F(N,null,U(e.getData,(t=>(H(),K(p,{key:t.id,class:"list-item"},{default:$((()=>[n(u,null,{title:$((()=>[V("div",Ge,[n(l,{content:t.title,delete:!!t.titleDelete,ellipsis:!!(e.$props.titleRows&&e.$props.titleRows>0)&&{rows:e.$props.titleRows,tooltip:!!t.title},style:J([{cursor:e.isTitleClickable?"pointer":""},{width:"100%","margin-bottom":"0 !important"}]),onClick:n=>e.handleTitleClick(t)},null,8,["content","delete","ellipsis","style","onClick"]),t.extra?(H(),F("div",et,[n(s,{color:t.color,class:"tag"},{default:$((()=>[X(Z(t.extra),1)])),_:2},1032,["color"])])):q("",!0)])])),avatar:$((()=>[t.avatar?(H(),K(c,{key:0,src:t.avatar,class:"avatar"},null,8,["src"])):(H(),F("span",tt,Z(t.avatar),1))])),description:$((()=>[V("div",null,[t.description?(H(),F("div",nt,[n(l,{content:t.description,ellipsis:!!(e.$props.descRows&&e.$props.descRows>0)&&{rows:e.$props.descRows,tooltip:!!t.description},style:{width:"100%","margin-bottom":"0 !important"}},null,8,["content","ellipsis"])])):q("",!0),V("div",ot,Z(t.datetime),1)])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["class","pagination"])}],["__scopeId","data-v-9a741838"]]);class at{constructor(){t(this,"heartTimeOut"),t(this,"ServerHeartTimeOut"),t(this,"timeout",5e3)}reset(){clearTimeout(this.heartTimeOut),clearTimeout(this.ServerHeartTimeOut)}start(e){this.heartTimeOut=setTimeout((t=>{e(t),this.ServerHeartTimeOut=setTimeout((t=>{e(t),this.reset(),this.start(e)}),this.timeout)}),this.timeout)}}class rt extends at{constructor(e){super(),t(this,"ws"),t(this,"reconnectTimer",0),t(this,"reconnectCount",10),t(this,"options",{url:null,heartTime:5e3,heartMsg:"ping",isReconnect:!0,isRestory:!1,reconnectTime:5e3,reconnectCount:5,openCb:e=>{},closeCb:e=>{},messageCb:e=>{},errorCb:e=>{}}),Object.assign(this.options,e),this.create()}create(){if(!("WebSocket"in window))throw new Error("当前浏览器不支持，无法使用");if(!this.options.url)throw new Error("地址不存在，无法建立通道");this.ws=new WebSocket(this.options.url),this.onopen(this.options.openCb),this.onclose(this.options.closeCb),this.onmessage(this.options.messageCb)}onopen(e){this.ws.onopen=t=>{clearTimeout(this.reconnectTimer),this.options.reconnectCount=this.reconnectCount,super.reset(),super.start((()=>{this.send(this.options.heartMsg)})),"function"==typeof e?e(t):"function"==typeof this.options.openCb&&this.options.openCb(t)}}onclose(e){this.ws.onclose=t=>{super.reset(),!this.options.isRestory&&this.onreconnect(),"function"==typeof e?e(t):"function"==typeof this.options.closeCb&&this.options.closeCb(t)}}onerror(e){this.ws.onerror=t=>{"function"==typeof e?e(t):"function"==typeof this.options.errorCb&&this.options.errorCb(t)}}onmessage(e){this.ws.onmessage=t=>{const n=t.data;n?(super.reset(),super.start((()=>{this.send(this.options.heartMsg)})),"function"==typeof e?e(n):"function"==typeof this.options.messageCb&&this.options.messageCb(n)):Q.error("收到失败的数据！")}}send(e){if(this.ws.readyState!==this.ws.OPEN)throw new Error("没有连接到服务器，无法推送");e=JSON.stringify(e),this.ws.send(e)}onreconnect(){this.options.reconnectCount>0||-1===this.options.reconnectCount?this.reconnectTimer=window.setTimeout((()=>{this.create(),-1!==this.options.reconnectCount&&this.options.reconnectCount--}),this.options.reconnectTime):(clearTimeout(this.reconnectTimer),this.options.reconnectCount=this.reconnectCount)}destroy(){super.reset(),clearTimeout(this.reconnectTimer),this.options.isRestory=!0,this.ws.close()}}function lt(e){return Y.get({url:"/system/message/getNoticeListData",params:e})}const st=i({components:{Popover:G,BellOutlined:qe,Tabs:ie,TabPane:ie.TabPane,Badge:oe,NoticeList:it},setup(){const e=ee().getUserInfo.userId,{prefixCls:t}=I("header-notify"),{createMessage:n}=ne(),o=M(Qe),i=l(0);lt({id:e}).then((e=>{o[0].list=e,o[0].list&&o[0].list.length&&o[0].list.forEach((()=>{i.value++}))}));return new rt({url:"wss://jmapp.bailingjk.net/mchsApp/package/websocket/"+e}).onmessage((t=>{te.info({message:t,description:""}),lt({id:e}).then((e=>{o[0].list=e,i.value++}))})),{prefixCls:t,listData:o,count:i,onNoticeClick:function(e){return t=this,a=null,r=function*(){var t;n.success(+e.id+"号消息已读"),e.titleDelete=!e.titleDelete,o[0].list=o[0].list.filter((t=>t.id!==e.id)),yield(t={id:e.id},Y.get({url:"/system/message/changeNoticeRead",params:t})).then((t=>{e.titleDelete?i.value--:i.value++}))},new Promise(((e,n)=>{var o=e=>{try{l(r.next(e))}catch(t){n(t)}},i=e=>{try{l(r.throw(e))}catch(t){n(t)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,i);l((r=r.apply(t,a)).next())}));var t,a,r},numberStyle:{}}}}),ct={key:0};const ut=L(st,[["render",function(e,t,o,i,a,r){const l=_("BellOutlined"),s=_("Badge"),c=_("NoticeList"),u=_("TabPane"),p=_("Tabs"),d=_("Popover");return H(),F("div",{class:W(e.prefixCls)},[n(d,{overlayClassName:`${e.prefixCls}__overlay`,title:"",trigger:"click"},{content:$((()=>[n(p,null,{default:$((()=>[(H(!0),F(N,null,U(e.listData,(t=>(H(),K(u,{key:t.key},{tab:$((()=>[X(Z(t.name)+" ",1),0!==t.list.length?(H(),F("span",ct,"("+Z(t.list.length)+")",1)):q("",!0)])),default:$((()=>["1"===t.key?(H(),K(c,{key:0,list:t.list,onTitleClick:e.onNoticeClick},null,8,["list","onTitleClick"])):(H(),K(c,{key:1,list:t.list},null,8,["list"]))])),_:2},1024)))),128))])),_:1})])),default:$((()=>[n(s,{count:e.count,numberStyle:e.numberStyle,offset:[-5,15]},{default:$((()=>[n(l)])),_:1},8,["count","numberStyle"])])),_:1},8,["overlayClassName"])],2)}]]);export{ut as default};
