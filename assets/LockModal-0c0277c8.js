import{a as e,b as s,r,e as a,q as t,L as o,aF as i,o as n,i as d,y as l,l as c,p as m,t as p,m as f,z as u,aG as j}from"./index-d32d699d.js";import{B as x,b}from"./index-b361c612.js";import{B as h,k as g}from"./useForm-39f6e704.js";import{u as k}from"./lock-4003443a.js";import{h as v}from"./header-e7a2da68.js";import"./useWindowSizeFn-6acabc85.js";import"./FullscreenOutlined-091fbcf5.js";import"./index-06c8a48f.js";import"./index-cd646f4b.js";import"./_baseIteratee-b178d67d.js";import"./get-8e454bdf.js";import"./useSize-e28be3fa.js";import"./index-b4d18824.js";import"./index-da1a1de3.js";import"./index-e84e313c.js";import"./index-ee500efb.js";import"./createForOfIteratorHelper-19a6e609.js";import"./index-280a19eb.js";import"./index-706c8391.js";import"./index-bf8f159c.js";import"./index-fe305bf5.js";import"./iconUtil-b885d1ac.js";import"./eagerComputed-b16e681c.js";import"./index-476a8598.js";import"./index-64da741e.js";import"./index-a72363e5.js";import"./css-49036a2d.js";import"./useRefs-b0536d84.js";import"./download-29600a9b.js";import"./index-406c2228.js";import"./index-2887dac0.js";import"./index-22735145.js";import"./index-8e2feec8.js";import"./uniqBy-19fec0f2.js";const y=e({name:"LockModal",components:{BasicModal:x,BasicForm:h},setup(){const{t:e}=t(),{prefixCls:o}=s("header-lock-modal"),i=r(),n=k(),d=a((()=>{var e;return null==(e=i.getUserInfo)?void 0:e.realName})),[l,{closeModal:c}]=b(),[m,{validateFields:p,resetFields:f}]=g({showActionButtonGroup:!1,schemas:[{field:"password",label:e("layout.header.lockScreenPassword"),colProps:{span:24},component:"InputPassword",required:!0}]});return{t:e,prefixCls:o,getRealName:d,register:l,registerForm:m,handleLock:function(){return e=this,s=null,r=function*(){const e=(yield p()).password;c(),n.setLockInfo({isLock:!0,pwd:e}),yield f()},new Promise(((a,t)=>{var o=e=>{try{n(r.next(e))}catch(s){t(s)}},i=e=>{try{n(r.throw(e))}catch(s){t(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,i);n((r=r.apply(e,s)).next())}));var e,s,r},avatar:a((()=>{const{avatar:e}=i.getUserInfo;return e||v}))}}}),_=["src"];const C=o(y,[["render",function(e,s,r,a,t,o){const x=i("BasicForm"),b=i("a-button"),h=i("BasicModal");return n(),d(h,j({footer:null,title:e.t("layout.header.lockScreen")},e.$attrs,{class:e.prefixCls,onRegister:e.register}),{default:l((()=>[c("div",{class:m(`${e.prefixCls}__entry`)},[c("div",{class:m(`${e.prefixCls}__header`)},[c("img",{src:e.avatar,class:m(`${e.prefixCls}__header-img`)},null,10,_),c("p",{class:m(`${e.prefixCls}__header-name`)},p(e.getRealName),3)],2),f(x,{onRegister:e.registerForm},null,8,["onRegister"]),c("div",{class:m(`${e.prefixCls}__footer`)},[f(b,{type:"primary",block:"",class:"mt-2",onClick:e.handleLock},{default:l((()=>[u(p(e.t("layout.header.lockScreenBtn")),1)])),_:1},8,["onClick"])],2)],2)])),_:1},16,["title","class","onRegister"])}]]);export{C as default};
