var e=(e,t,r)=>new Promise(((i,a)=>{var s=e=>{try{d(r.next(e))}catch(t){a(t)}},l=e=>{try{d(r.throw(e))}catch(t){a(t)}},d=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,l);d((r=r.apply(e,t)).next())}));import{v as t}from"./userApi-36d22843.js";import{a as r,dt as i,dA as a,bV as s,ao as l,s as d,v as o,K as c,e as u,o as n,i as p,y as v,m,h as f,b4 as y,z as _,t as T,f as b,F as g,aI as h,j as k,l as x,aG as O}from"./index-d32d699d.js";import{C as j}from"./index-d5b1635c.js";import"./index-80ea7d72.js";import"./index-cd646f4b.js";import{D as A,a as P}from"./index-b0cc5f6c.js";import{T as R}from"./index-280a19eb.js";import{u as C,B as D}from"./index-35313998.js";import{a as I}from"./sysAreaApi-e41d1f2f.js";import{C as N}from"./index-0a65f22b.js";var E=(e=>(e.SUPER="super",e.TEST="test",e.ROOT="root",e))(E||{});const M=r({name:"Authority",props:{value:{type:[Number,Array,String],default:""}},setup(e,{slots:t}){const{hasPermission:r}=i();return()=>function(){const{value:i}=e;return i?r(i)?a(t):null:a(t)}()}}),S={key:0},w={key:1},z={key:0},W={key:1},B={key:2},F={key:0},G={key:1},K={key:2},L=["src"],U=r({__name:"DetailModal",emits:["close"],setup(r,{emit:i}){const a=s(l,{style:{fontSize:"24px"},spin:!0}),U=d(!0),V=d(!1),$=d({});let q=o({receiverName:"",receiverMobile:"",receiverProvince:"",receiverCity:"",receiverDistrict:"",receiverAddress:""});const H=d(""),J=d(""),[Q]=C((r=>e(this,null,(function*(){try{q={receiverName:r.record.shipping.receiverName,receiverMobile:r.record.shipping.receiverMobile,receiverProvince:r.record.shipping.receiverProvince,receiverCity:r.record.shipping.receiverCity,receiverDistrict:r.record.shipping.receiverDistrict,receiverAddress:r.record.shipping.receiverAddress},H.value=r.record.patientName,J.value=r.record.patientIdCard,$.value=yield t({userId:r.record.userId,deptId:r.record.deptId})}catch(e){}finally{U.value=!1}}))));function X(){i("close",!1)}c((()=>$.value),(()=>e(this,null,(function*(){try{q.receiverProvince=yield I({code:q.receiverProvince})}catch(e){}finally{V.value=!0}}))));const Y=u((()=>"用户详情"));return(e,t)=>(n(),p(D,O({isDetail:!0,title:Y.value},e.$attrs,{onClose:X,onRegister:f(Q)}),{default:v((()=>[m(f(y),{indicator:f(a),spinning:U.value,size:"large",tip:"加载订单信息ing···"},{default:v((()=>[m(f(A),{column:3,title:"用户信息"},{default:v((()=>[m(f(P),{label:"领取姓名"},{default:v((()=>[_(T(f(q).receiverName),1)])),_:1}),m(f(P),{label:"联系方式"},{default:v((()=>[_(T(f(q).receiverMobile),1)])),_:1}),m(f(P),{span:2,label:"联系地址"},{default:v((()=>[V.value?(n(),b("div",S,[m(M,{value:f(E).ROOT},{default:v((()=>[_(T(f(q).receiverProvince),1)])),_:1},8,["value"]),m(M,{value:f(E).ROOT},{default:v((()=>[_(T(f(q).receiverCity),1)])),_:1},8,["value"]),m(M,{value:f(E).ROOT},{default:v((()=>[_(T(f(q).receiverDistrict),1)])),_:1},8,["value"]),m(M,{value:f(E).ROOT},{default:v((()=>[_(T(f(q).receiverAddress),1)])),_:1},8,["value"])])):(n(),b("div",w,[m(f(l))]))])),_:1})])),_:1}),(n(!0),b(g,null,h($.value,((e,t)=>(n(),p(f(A),{key:t,column:3,title:"订单组"},{default:v((()=>[m(f(P),{label:"订单号"},{default:v((()=>[_(T(e.orderId),1)])),_:2},1024),m(f(P),{label:"创建时间"},{default:v((()=>[_(T(e.createTime),1)])),_:2},1024),m(f(P),{label:"领取时间"},{default:v((()=>[_(T(e.paymentTime),1)])),_:2},1024),m(f(P),{label:"门店"},{default:v((()=>[_(T(e.deptName),1)])),_:2},1024),m(f(P),{label:"核销时间"},{default:v((()=>[e.updateTime===e.createTime?(n(),b("span",z,"未核销")):e.updateTime.split(":")[0]===e.createTime.split(":")[0]&&e.updateTime.split(":")[1]===e.createTime.split(":")[1]||e.updateTime.split(":")[0]===e.paymentTime.split(":")[0]&&e.updateTime.split(":")[1]===e.paymentTime.split(":")[1]?(n(),b("span",W,"未核销")):(n(),b("span",B,T(e.updateTime),1))])),_:2},1024),m(f(P),{label:"订单状态"},{default:v((()=>[0===e.status?(n(),p(f(R),{key:0,color:"red"},{default:v((()=>[_("已取消")])),_:1})):10===e.status?(n(),p(f(R),{key:1,color:"red"},{default:v((()=>[_("未领取")])),_:1})):20===e.status?(n(),p(f(R),{key:2,color:"green"},{default:v((()=>[_("已领取")])),_:1})):40===e.status?(n(),p(f(R),{key:3,color:"green"},{default:v((()=>[_("已发货")])),_:1})):50===e.status?(n(),p(f(R),{key:4,color:"green"},{default:v((()=>[_("交易成功")])),_:1})):60===e.status?(n(),p(f(R),{key:5,color:"red"},{default:v((()=>[_("交易关闭")])),_:1})):k("",!0)])),_:2},1024),m(f(P),{span:3,label:"商品详情"},{default:v((()=>[(n(!0),b(g,null,h(e.productList,((t,r)=>(n(),b("div",{key:r},[m(f(j),{hoverable:"",style:{width:"200px"}},{extra:v((()=>[t.lastEditTime.split(":")[0]===e.createTime.split(":")[0]?(n(),b("span",F)):t.lastEditTime.split(":")[0]===e.paymentTime.split(":")[0]?(n(),b("span",G)):(n(),b("span",K,T(t.lastEditTime),1))])),cover:v((()=>[x("img",{src:t.imgAddr,alt:"productImg"},null,8,L)])),actions:v((()=>[0===t.isWriteOff?(n(),p(f(R),{key:0,color:"red"},{default:v((()=>[_("未核销")])),_:1})):1===t.isWriteOff?(n(),p(f(R),{key:1,color:"green"},{default:v((()=>[_("已核销")])),_:1})):2===t.isWriteOff?(n(),p(f(R),{key:2,color:"blue"},{default:v((()=>[_("跨店核销")])),_:1})):k("",!0)])),default:v((()=>[m(f(N),{description:t.productDesc,title:t.productName},null,8,["description","title"])])),_:2},1024)])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["indicator","spinning"])])),_:1},16,["title","onRegister"]))}});export{E as R,U as _};
