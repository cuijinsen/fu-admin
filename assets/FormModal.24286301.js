var P=Object.defineProperty,C=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var I=(o,u,e)=>u in o?P(o,u,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[u]=e,p=(o,u)=>{for(var e in u||(u={}))y.call(u,e)&&I(o,e,u[e]);if(f)for(var e of f(u))v.call(u,e)&&I(o,e,u[e]);return o},c=(o,u)=>C(o,_(u));var h=(o,u,e)=>new Promise((l,d)=>{var i=n=>{try{r(e.next(n))}catch(s){d(s)}},m=n=>{try{r(e.throw(n))}catch(s){d(s)}},r=n=>n.done?l(n.value):Promise.resolve(n.value).then(i,m);r((e=e.apply(o,u)).next())});import{a as M,B as O}from"./index.296b7df0.js";import{B as S}from"./BasicForm.1111a937.js";import{u as T}from"./useForm.e97ebf24.js";import{a as N,f as j,i as a,v as D,o as k,j as R,z as q,n as V,aB as G,G as L}from"./index.7f67491a.js";import{s as g}from"./index.f816d15d.js";import{a as U,v as W,b as z,e as $}from"./sysDeptApi.d6458184.js";const te=[{title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"deptName",width:120},{title:"\u90E8\u95E8\u5168\u79F0",dataIndex:"deptFullname",width:150},{title:"\u673A\u6784\u7C7B\u578B",dataIndex:"orgType",width:120},{title:"\u8D1F\u8D23\u4EBA",dataIndex:"leader",width:120},{title:"\u8D1F\u8D23\u4EBA\u7535\u8BDD",dataIndex:"leaderPhone",width:120},{title:"\u529E\u516C\u7535\u8BDD",dataIndex:"phone",width:120},{title:"\u90AE\u7BB1",dataIndex:"email",width:120},{title:"\u90AE\u653F\u7F16\u7801",dataIndex:"postCode",width:120},{title:"\u8054\u7CFB\u5730\u5740",dataIndex:"address",width:120},{title:"\u6392\u5E8F",dataIndex:"sort",width:80},{title:"\u72B6\u6001",dataIndex:"status",width:80},{title:"\u5907\u6CE8",dataIndex:"remarks"}],oe=[{field:"deptName",label:"\u90E8\u95E8\u540D\u79F0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"}},{field:"deptFullname",label:"\u90E8\u95E8\u5168\u79F0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u5168\u79F0"}}],H=[{field:"deptName",label:"\u90E8\u95E8\u540D\u79F0",component:"Input",required:!0,componentProps:{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",maxlength:100}},{field:"deptFullname",label:"\u90E8\u95E8\u5168\u79F0",component:"Input",required:!0,componentProps:{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u5168\u79F0",maxlength:100}},{field:"orgType",label:"\u673A\u6784\u7C7B\u578B",component:"ApiRadioGroup",required:!0,componentProps:{api:g,params:{dictCode:"sys_org_type"}},defaultValue:"1"},{field:"parentId",label:"\u4E0A\u7EA7\u90E8\u95E8",component:"TreeSelect",componentProps:{placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",fieldNames:{label:"name",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"leader",label:"\u8D1F\u8D23\u4EBA",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA",maxlength:30}},{field:"leaderPhone",label:"\u8D1F\u8D23\u4EBA\u7535\u8BDD",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u7535\u8BDD",maxlength:30}},{field:"phone",label:"\u529E\u516C\u7535\u8BDD",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u529E\u516C\u7535\u8BDD",maxlength:30}},{field:"email",label:"\u90AE\u7BB1",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",maxlength:100}},{field:"postCode",label:"\u90AE\u653F\u7F16\u7801",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u90AE\u653F\u7F16\u7801",maxlength:30}},{field:"address",label:"\u8054\u7CFB\u5730\u5740",component:"InputTextArea",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u5730\u5740",maxlength:500}},{field:"sort",label:"\u6392\u5E8F",component:"InputNumber",required:!0,defaultValue:"1",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",min:1}},{field:"status",label:"\u72B6\u6001",component:"ApiRadioGroup",required:!0,componentProps:{api:g,params:{dictCode:"sys_status"}},defaultValue:"0"},{label:"\u5907\u6CE8",field:"remarks",component:"InputTextArea",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",maxlength:500}}],J=N({__name:"FormModal",emits:["success","register"],setup(o,{emit:u}){const e=j(()=>a(l)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),l=D(!1),d=D(),{createMessage:i}=L(),[m,{setFieldsValue:r,resetFields:n,validate:s,updateSchema:b}]=T({labelWidth:100,schemas:H,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{lg:12,md:24}}),[x,{setModalProps:F,closeModal:w}]=M(t=>h(this,null,function*(){yield n(),F({confirmLoading:!1}),l.value=!!(t!=null&&t.isUpdate);const B=yield U({nodeId:t.record.id});if(yield b([{field:"parentId",componentProps:{treeData:B}}]),a(l)){d.value=t.record.id;const E=yield W({id:t.record.id});yield r(c(p({},E),{parentId:E.parentId==="0"?null:E.parentId}))}else yield r({parentId:t.record.parentId})}));function A(){return h(this,null,function*(){try{const t=yield s();F({confirmLoading:!0}),a(l)?yield $(c(p({},t),{id:d.value})):yield z(p({},t)),a(l)?i.success("\u7F16\u8F91\u6210\u529F\uFF01"):i.success("\u65B0\u589E\u6210\u529F\uFF01"),w(),u("success",{isUpdate:a(l),values:c(p({},t),{id:d.value})})}finally{F({confirmLoading:!1})}})}return(t,B)=>(k(),R(a(O),G(t.$attrs,{destroyOnClose:"",onRegister:a(x),title:a(e),onOk:A,width:"900px"}),{default:q(()=>[V(a(S),{onRegister:a(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});var ae=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{ae as F,J as _,te as c,oe as s};
