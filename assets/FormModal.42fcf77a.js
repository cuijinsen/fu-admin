var v=Object.defineProperty,y=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var C=(u,o,e)=>o in u?v(u,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[o]=e,c=(u,o)=>{for(var e in o||(o={}))x.call(o,e)&&C(u,e,o[e]);if(h)for(var e of h(o))_.call(o,e)&&C(u,e,o[e]);return u},m=(u,o)=>y(u,S(o));var B=(u,o,e)=>new Promise((a,s)=>{var d=n=>{try{r(e.next(n))}catch(i){s(i)}},p=n=>{try{r(e.throw(n))}catch(i){s(i)}},r=n=>n.done?a(n.value):Promise.resolve(n.value).then(d,p);r((e=e.apply(u,o)).next())});import{a as D,B as M}from"./index.8d73dc63.js";import{B as k}from"./BasicForm.1636ebdd.js";import{u as O}from"./useForm.454b56eb.js";import{bU as I,a as R,f as U,i as l,v as f,s as j,o as T,j as L,z as N,n as G,aB as z,G as V}from"./index.b74cf1bc.js";import{v as W,b as q,c as $}from"./productApi.0d02418e.js";import{T as A}from"./index.ea1d2165.js";import{a as H,s as J}from"./index.738e0162.js";const ne=[{title:"\u5546\u54C1Id",dataIndex:"id",width:120},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"productName",width:120},{title:"\u5546\u54C1\u63CF\u8FF0",dataIndex:"productDesc",width:120},{title:"\u5546\u54C1\u56FE\u7247",dataIndex:"imgAddr",width:120},{title:"\u6B63\u5E38\u4EF7\u683C",dataIndex:"normalPrice",width:80},{title:"\u6253\u6298\u4EF7\u683C",dataIndex:"promotionPrice",width:80},{title:"\u5546\u54C1\u5E93\u5B58",dataIndex:"stock",width:80},{title:"\u662F\u5426\u4E0A\u67B6",dataIndex:"enableStatus",customRender:({record:u})=>{const e=~~u.enableStatus===1,a=e?"green":"red",s=e?"\u5DF2\u4E0A\u67B6":"\u672A\u4E0A\u67B6";return I(A,{color:a},()=>s)},width:80},{title:"\u5BA1\u6838\u72B6\u6001",dataIndex:"priority",width:80,customRender:({record:u})=>{const e=~~u.priority===1,a=e?"blue":"red",s=e?"\u5DF2\u5BA1\u6838":"\u672A\u5BA1\u6838";return I(A,{color:a},()=>s)}}],le=[{field:"productName",label:"\u5546\u54C1\u540D\u79F0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"}},{field:"priority",label:"\u5BA1\u6838\u72B6\u6001",component:"Select",componentProps:{placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6838\u72B6\u6001",options:[{label:"\u5DF2\u5BA1\u6838",value:"1",key:"1"},{label:"\u672A\u5BA1\u6838",value:"2",key:"2"}]}},{field:"enableStatus",label:"\u4E0A\u67B6\u72B6\u6001",component:"Select",componentProps:{placeholder:"\u8BF7\u9009\u62E9\u4E0A\u67B6\u72B6\u6001",options:[{label:"\u5DF2\u4E0A\u67B6",value:"1",key:"1"},{label:"\u5DF2\u4E0B\u67B6",value:"2",key:"2"}]}}],K=[{field:"id",label:"\u5546\u54C1Id",component:"Input",show:!1,componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1Id"}},{field:"productName",label:"\u5546\u54C1\u540D\u79F0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"}},{field:"productDesc",label:"\u5546\u54C1\u63CF\u8FF0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u63CF\u8FF0"}},{field:"imgAddr",label:"\u5546\u54C1\u56FE\u7247",component:"UploadImg",componentProps:({formModel:u})=>({uploadApi:H,value:u.imgAddr,btnText:"\u9009\u62E9\u56FE\u7247",btnProps:{preIcon:"ant-design:cloud-upload-outlined"},width:"150"})},{field:"normalPrice",label:"\u5546\u54C1\u539F\u4EF7",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u539F\u4EF7"}},{field:"promotionPrice",label:"\u5546\u54C1\u6298\u6263\u4EF7",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u6298\u6263\u4EF7"}},{field:"stock",label:"\u5546\u54C1\u5E93\u5B58",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5E93\u5B58"}},{field:"enableStatus",label:"\u4E0A\u67B6\u72B6\u6001",component:"ApiRadioGroup",required:!0,componentProps:{api:J,params:{dictCode:"fubao_product_enableStatus"}}},{field:"createByAid",label:"\u521B\u5EFA\u4EBA",component:"Input",slot:"createByAid",show:!1,componentProps:{}}],Q=R({__name:"FormModal",emits:["success","register"],setup(u,{emit:o}){const e=U(()=>l(a)?"\u7F16\u8F91\u5546\u54C1":"\u65B0\u589E\u5546\u54C1"),a=f(!1),s=f(),d=f(),{createMessage:p}=V(),[r,{setFieldsValue:n,resetFields:i,validate:E,updateSchema:X}]=O({labelWidth:100,schemas:K,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{lg:12,md:24}}),[g,{setModalProps:F,closeModal:w}]=D(t=>B(this,null,function*(){if(yield i(),F({confirmLoading:!1}),a.value=!!(t!=null&&t.isUpdate),d.value=t==null?void 0:t.record.deptId,l(a)){s.value=t.record.id;const b=yield W({id:t.record.id});yield n(c({},b)),n({createByAid:j().getUserInfo.userId})}}));function P(){return B(this,null,function*(){try{const t=yield E();F({confirmLoading:!0}),l(a)?yield $(m(c({},t),{id:s.value})):yield q(m(c({},t),{shopId:d.value})),l(a)?p.success("\u7F16\u8F91\u6210\u529F\uFF01"):p.success("\u65B0\u589E\u6210\u529F\uFF01"),w(),o("success",{isUpdate:l(a),values:m(c({},t),{id:s.value})})}finally{F({confirmLoading:!1})}})}return(t,b)=>(T(),L(l(M),z(t.$attrs,{destroyOnClose:"",onRegister:l(g),title:l(e),onOk:P,width:"900px"}),{default:N(()=>[G(l(k),{onRegister:l(r)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});var re=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{re as F,Q as _,ne as c,le as s};
