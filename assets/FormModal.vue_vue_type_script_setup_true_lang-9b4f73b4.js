var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,i=(e,t)=>{for(var s in t||(t={}))a.call(t,s)&&r(e,s,t[s]);if(o)for(var s of o(t))n.call(t,s)&&r(e,s,t[s]);return e},l=(e,o)=>t(e,s(o)),d=(e,t,s)=>new Promise(((o,a)=>{var n=e=>{try{i(s.next(e))}catch(t){a(t)}},r=e=>{try{i(s.throw(e))}catch(t){a(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,r);i((s=s.apply(e,t)).next())}));import{b as p,B as c}from"./index-b361c612.js";import{k as u,B as m}from"./useForm-39f6e704.js";import{cR as f,a as y,e as g,h,s as b,o as v,i as x,y as C,m as P,aG as I,E as w}from"./index-d32d699d.js";import{s as O}from"./index-2e5c6a76.js";const j=[{title:"参数名称",dataIndex:"configName",width:150,align:"left"},{title:"参数键名",dataIndex:"configKey",width:150,align:"left"},{title:"参数键值",dataIndex:"configValue",width:200,align:"left"},{title:"状态",dataIndex:"sysStatus",width:80},{title:"备注",dataIndex:"remarks"},{title:"创建时间",dataIndex:"createTime",width:160},{title:"更新时间",dataIndex:"updateTime",width:160}],S=[{field:"configName",label:"参数名称",component:"Input",componentProps:{placeholder:"请输入参数名称"}},{field:"configKey",label:"参数键名",component:"Input",componentProps:{placeholder:"请输入参数键名"}}],R=[{field:"configName",label:"参数名称",component:"Input",required:!0,componentProps:{placeholder:"请输入参数名称",maxlength:100}},{field:"configKey",label:"参数键名",component:"Input",required:!0,componentProps:{placeholder:"请输入参数键名",maxlength:100}},{field:"configValue",label:"参数键值",component:"Input",required:!0,componentProps:{placeholder:"请输入参数键值",maxlength:500}},{field:"sort",label:"排序",component:"InputNumber",required:!0,defaultValue:"1",componentProps:{placeholder:"请输入排序",min:1}},{field:"sysStatus",label:"状态",component:"ApiRadioGroup",required:!0,componentProps:{api:O,params:{dictCode:"sys_status"}},defaultValue:"0"},{label:"备注",field:"remarks",component:"InputTextArea",componentProps:{placeholder:"请输入备注",maxlength:500}}];function q(e){return f.get({url:"/system/sysConfig/selectSysConfigWithPage",params:e})}function N(e){return f.post({url:"/system/sysConfig/removeSysConfig",params:e},{joinParamsToUrl:!0})}function T(e){return f.request({url:"/system/sysConfig/exportSysConfig",params:e,method:"get",responseType:"blob"},{isReturnNativeResponse:!0})}function V(e){return f.post({url:"/system/sysConfig/refreshSysConfigCache",params:e})}const _=y({__name:"FormModal",emits:["success","register"],setup(e,{emit:t}){const s=g((()=>h(o)?"编辑参数":"新增参数")),o=b(!1),a=b(),{createMessage:n}=w(),[r,{setFieldsValue:y,resetFields:O,validate:j}]=u({labelWidth:100,schemas:R,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{span:24}}),[S,{setModalProps:q,closeModal:N}]=p((e=>d(this,null,(function*(){if(yield O(),q({confirmLoading:!1}),o.value=!!(null==e?void 0:e.isUpdate),h(o)){a.value=e.record.id;const s=yield(t={id:e.record.id},f.get({url:"/system/sysConfig/getSysConfig",params:t}));yield y(i({},s))}var t}))));function T(){return d(this,null,(function*(){try{const s=yield j();q({confirmLoading:!0}),h(o)?yield function(e){return f.post({url:"/system/sysConfig/updateSysConfig",params:e})}(l(i({},s),{id:a.value})):yield(e=i({},s),f.post({url:"/system/sysConfig/addSysConfig",params:e})),h(o)?n.success("编辑成功！"):n.success("新增成功！"),N(),t("success",{isUpdate:h(o),values:l(i({},s),{id:a.value})})}finally{q({confirmLoading:!1})}var e}))}return(e,t)=>(v(),x(h(c),I(e.$attrs,{destroyOnClose:"",onRegister:h(S),title:s.value,onOk:T}),{default:C((()=>[P(h(m),{onRegister:h(r)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}});export{_,V as a,j as c,T as e,q as f,N as r,S as s};
