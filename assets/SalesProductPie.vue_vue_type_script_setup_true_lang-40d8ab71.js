import{a as e,s as a,J as t,K as l,o as n,f as o,m as i,y as s,l as r,bp as u,h as m,r as d}from"./index-d32d699d.js";import{C as v}from"./index-d5b1635c.js";import"./index-80ea7d72.js";import"./index-cd646f4b.js";import{u as p}from"./useECharts-8dd670ef.js";import{c as h}from"./largeScreenApi-de23999b.js";import{m as f}from"./shandongData-27206427.js";const c=e({__name:"SalesProductPie",props:{loading:Boolean,width:{type:String,default:"100%"},height:{type:String,default:"300px"},startTime:{type:Object},endTime:{type:Object}},setup(e){const c=e;let y=[],b=[],g=[],T=[],j=[],x=[];const Y=a(null),{setOptions:w}=p(Y);let C=a();function D(){return e=this,a=null,t=function*(){C.value=yield h({deptId:d().getUserInfo.deptId,startTime:c.startTime?c.startTime.format("YYYY-MM-DD HH:mm:ss"):null,endTime:c.endTime?c.endTime.format("YYYY-MM-DD HH:mm:ss"):null}),y=[],b=[],g=[],T=[],j=[],x=[],f.forEach((e=>{C.value.forEach((a=>{e.name===a.city&&(e.value[0].value=a.payCountToday,e.value[1].value=a.allCountToday,e.value[2].value=a.conversionRateToday,e.value[3].value=a.payCount,e.value[4].value=a.allCount,e.value[5].value=a.conversionRate)})),y.push({name:e.name,value:e.value[0].value}),b.push({name:e.name,value:e.value[1].value}),g.push({name:e.name,value:e.value[2].value}),T.push({name:e.name,value:e.value[3].value}),j.push({name:e.name,value:e.value[4].value}),x.push({name:e.name,value:e.value[5].value})})),w({tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20},series:[{color:["#5ab1ef","#b6a2de","#67e0e3","#2ec7c9","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d"],name:"访问来源",type:"pie",radius:["40%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},emphasis:{label:{show:!0,fontSize:"12",fontWeight:"bold"}},labelLine:{show:!0},data:y,animationType:"scale",animationEasing:"exponentialInOut",animationDelay:function(){return 100*Math.random()}}]})},new Promise(((l,n)=>{var o=e=>{try{s(t.next(e))}catch(a){n(a)}},i=e=>{try{s(t.throw(e))}catch(a){n(a)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,i);s((t=t.apply(e,a)).next())}));var e,a,t}return t((()=>{D()})),l((()=>c.startTime),(()=>{D()})),l((()=>c.endTime),(()=>{D()})),(a,t)=>(n(),o("div",null,[i(m(v),{title:"地市占比"},{default:s((()=>[r("div",{ref_key:"chartRef",ref:Y,style:u({width:e.width,height:e.height})},null,4)])),_:1})]))}});export{c as _};
