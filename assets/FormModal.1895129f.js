var E=Object.defineProperty,y=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var I=(t,u,e)=>u in t?E(t,u,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[u]=e,p=(t,u)=>{for(var e in u||(u={}))A.call(u,e)&&I(t,e,u[e]);if(b)for(var e of b(u))v.call(u,e)&&I(t,e,u[e]);return t},f=(t,u)=>y(t,_(u));var h=(t,u,e)=>new Promise((l,s)=>{var d=n=>{try{r(e.next(n))}catch(i){s(i)}},m=n=>{try{r(e.throw(n))}catch(i){s(i)}},r=n=>n.done?l(n.value):Promise.resolve(n.value).then(d,m);r((e=e.apply(t,u)).next())});import{a as C,B as k}from"./index.8d73dc63.js";import{B as M}from"./BasicForm.1636ebdd.js";import{u as S}from"./useForm.454b56eb.js";import{a as N,f as O,i as a,v as g,o as R,j as q,z as V,n as j,aB as G,G as T}from"./index.b74cf1bc.js";import{s as W}from"./sysPostApi.c412fafb.js";import{d as L}from"./sysRoleApi.b455488e.js";import{s as Y}from"./sysDeptApi.78687c62.js";import{s as B,g as U}from"./index.738e0162.js";import{v as z,a as $,e as H}from"./sysUserApi.b2c3fd9f.js";const se=[{title:"\u8D26\u53F7",dataIndex:"account",width:120},{title:"\u90E8\u95E8",dataIndex:"deptName",width:120},{title:"\u6635\u79F0",dataIndex:"nickname",width:120},{title:"\u6027\u522B",dataIndex:"sex",width:120},{title:"\u59D3\u540D",dataIndex:"realname",width:120},{title:"\u82F1\u6587\u540D",dataIndex:"englishName",width:120},{title:"\u90AE\u7BB1",dataIndex:"email",width:120},{title:"\u624B\u673A\u53F7",dataIndex:"phone",width:120},{title:"\u5DE5\u53F7",dataIndex:"staffNumber",width:120},{title:"\u751F\u65E5",dataIndex:"birthday",width:120},{title:"\u9501\u5B9A",dataIndex:"lockFlag",width:120},{title:"\u6392\u5E8F",dataIndex:"sort",width:80},{title:"\u72B6\u6001",dataIndex:"status",width:80},{title:"\u5907\u6CE8",dataIndex:"remarks"}],re=[{field:"account",label:"\u8D26\u53F7",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"}},{field:"nickname",label:"\u6635\u79F0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0"}},{field:"realname",label:"\u59D3\u540D",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"}},{field:"englishName",label:"\u82F1\u6587\u540D",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u540D"}},{field:"phone",label:"\u624B\u673A\u53F7",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}},{field:"staffNumber",label:"\u5DE5\u53F7",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u53F7"}}],J=[{field:"account",label:"\u8D26\u53F7",component:"Input",required:!0,componentProps:{placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",maxlength:100}},{field:"deptId",label:"\u90E8\u95E8",component:"ApiTreeSelect",componentProps:({formModel:t})=>({placeholder:"\u8BF7\u9009\u62E9\u90E8\u95E8",api:Y,fieldNames:{label:"name",key:"id",value:"id"}})},{field:"password",label:"\u5BC6\u7801",component:"InputPassword",required:!0,componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",maxlength:100}},{field:"nickname",label:"\u6635\u79F0",component:"Input",required:!0,componentProps:{placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0",maxlength:100}},{field:"sex",label:"\u6027\u522B",component:"ApiRadioGroup",required:!0,componentProps:{api:B,params:{dictCode:"sys_sex"}},defaultValue:"1"},{field:"realname",label:"\u59D3\u540D",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",maxlength:100}},{field:"englishName",label:"\u82F1\u6587\u540D",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u540D",maxlength:100}},{field:"email",label:"\u90AE\u7BB1",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",maxlength:100}},{field:"phone",label:"\u624B\u673A\u53F7",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",maxlength:30}},{field:"staffNumber",label:"\u5DE5\u53F7",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u53F7",maxlength:30}},{field:"birthday",label:"\u751F\u65E5",component:"DatePicker",componentProps:{placeholder:"\u8BF7\u9009\u62E9\u751F\u65E5",valueFormat:"YYYY-MM-DD"}},{field:"lockFlag",label:"\u9501\u5B9A",component:"ApiRadioGroup",required:!0,componentProps:{api:B,params:{dictCode:"sys_lock_flag"}},defaultValue:"0"},{field:"postIds",label:"\u5C97\u4F4D",component:"ApiSelect",componentProps:()=>({placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",api:W,mode:"multiple",labelField:"postName",valueField:"id"})},{field:"roleIds",label:"\u89D2\u8272",component:"ApiSelect",componentProps:()=>({placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",api:L,mode:"multiple",labelField:"roleName",valueField:"id"})},{field:"sort",label:"\u6392\u5E8F",component:"InputNumber",required:!0,defaultValue:"1",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",min:1}},{field:"status",label:"\u72B6\u6001",component:"ApiRadioGroup",required:!0,componentProps:{api:B,params:{dictCode:"sys_status"}},defaultValue:"0"},{label:"\u5907\u6CE8",field:"remarks",component:"InputTextArea",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",maxlength:500}}],K=N({__name:"FormModal",emits:["success","register"],setup(t,{emit:u}){const e=O(()=>a(l)?"\u7F16\u8F91\u7528\u6237":"\u65B0\u589E\u7528\u6237"),l=g(!1),s=g(),{createMessage:d}=T(),[m,{setFieldsValue:r,resetFields:n,validate:i,updateSchema:D}]=S({labelWidth:100,schemas:J,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{lg:12,md:24}}),[w,{setModalProps:F,closeModal:P}]=C(o=>h(this,null,function*(){if(yield n(),F({confirmLoading:!1}),l.value=!!(o!=null&&o.isUpdate),yield D([{field:"password",ifShow:!a(l)}]),a(l)){s.value=o.record.id;const c=yield z({id:o.record.id});yield r(p({},c))}else{const c=yield U({key:"sys_init_password"});yield r({password:c})}}));function x(){return h(this,null,function*(){try{const o=yield i();F({confirmLoading:!0}),a(l)?yield H(f(p({},o),{id:s.value})):yield $(p({},o)),a(l)?d.success("\u7F16\u8F91\u6210\u529F\uFF01"):d.success("\u65B0\u589E\u6210\u529F\uFF01"),P(),u("success",{isUpdate:a(l),values:f(p({},o),{id:s.value})})}finally{F({confirmLoading:!1})}})}return(o,c)=>(R(),q(a(k),G(o.$attrs,{destroyOnClose:"",onRegister:a(w),title:a(e),onOk:x,width:"900px"}),{default:V(()=>[j(a(M),{onRegister:a(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});var ie=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{ie as F,K as _,se as c,re as s};
