var $=Object.defineProperty,q=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var E=(r,i,o)=>i in r?$(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o,O=(r,i)=>{for(var o in i||(i={}))J.call(i,o)&&E(r,o,i[o]);if(B)for(var o of B(i))Q.call(i,o)&&E(r,o,i[o]);return r},D=(r,i)=>q(r,H(i));var x=(r,i,o)=>new Promise((h,k)=>{var T=p=>{try{_(o.next(p))}catch(g){k(g)}},I=p=>{try{_(o.throw(p))}catch(g){k(g)}},_=p=>p.done?h(p.value):Promise.resolve(p.value).then(T,I);_((o=o.apply(r,i)).next())});import{a as X,v as b,br as Y,a9 as Z,an as ee,aA as te,bS as oe,o as s,h as v,n as V,z as u,x as se,j as l,B as m,F as C,i as t,t as y,fB as d,k as a,b8 as ie,G as ae}from"./index.01016e1b.js";import{T as f}from"./index.ad15f2c8.js";import{B as ne}from"./TableImg.19bd1df3.js";import{j as re}from"./BasicForm.23326f3b.js";import{u as ue}from"./useTable.39e6d3ba.js";import{b as le}from"./index.e55212df.js";import{c as pe,s as me,_ as ce}from"./FormModal.42743f29.js";import{f as ye,r as de}from"./sysMenuApi.d7c463cd.js";import{s as M}from"./index.55456fcf.js";import"./index.261e1402.js";import"./Checkbox.0393c1df.js";import"./index.59b7c00c.js";import"./index.703a23e2.js";import"./eagerComputed.19683db9.js";import"./useForm.5283242d.js";import"./index.5eaa6961.js";import"./index.cefdbd36.js";import"./index.460eb416.js";import"./useSize.368ff12a.js";import"./useWindowSizeFn.5f64a474.js";import"./useContentViewHeight.9f4adb83.js";import"./ArrowLeftOutlined.65423a20.js";import"./index.b66e8182.js";import"./index.b4367855.js";import"./index.be501b20.js";import"./uuid.2b29000c.js";import"./index.b8bb4c84.js";import"./_baseIteratee.c73c9502.js";import"./get.1a35d26d.js";import"./DeleteOutlined.60895bb2.js";import"./index.d1bfa846.js";import"./useRefs.b8e07b47.js";import"./Form.45f609aa.js";import"./Col.d5380690.js";import"./useFlexGapSupport.0520fe90.js";import"./index.44e8fa84.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.efe9779a.js";import"./FullscreenOutlined.969211bf.js";import"./index.b6126e6e.js";import"./fromPairs.84aabb58.js";import"./scrollTo.0cc164ce.js";import"./index.d5369391.js";/* empty css              *//* empty css               */import"./index.499a6f59.js";import"./index.3205f76b.js";import"./index.bb233b92.js";import"./download.e8ebbf84.js";import"./base64Conver.08b9f4ec.js";import"./index.2f9433fa.js";import"./cropper.bcc4a72c.js";import"./index.9ada290f.js";import"./uniqBy.5ad5c6ba.js";const kt=X({__name:"index",props:{nodeId:{type:String}},emits:["refresh-tree"],setup(r,{expose:i,emit:o}){const h=r,k=b([]),T=b([]),I=b([]),_=b([]),p=b([]),g=b([]);Y(()=>x(this,null,function*(){k.value=yield M({dictCode:"sys_menu_type"}),T.value=yield M({dictCode:"sys_keepalive"}),I.value=yield M({dictCode:"sys_link_external"}),_.value=yield M({dictCode:"sys_visible"}),p.value=yield M({dictCode:"sys_frame"}),g.value=yield M({dictCode:"sys_status"})}));const{createMessage:R}=ae(),[j,{openModal:S}]=le(),[A,{reload:F}]=ue({title:"\u83DC\u5355\u5217\u8868",api:ye,rowKey:"id",columns:pe,formConfig:{baseColProps:{sm:24,lg:6},labelWidth:90,schemas:me,autoSubmitOnEnter:!0,resetButtonOptions:{preIcon:"ant-design:delete-outlined"},submitButtonOptions:{preIcon:"ant-design:search-outlined"}},showIndexColumn:!1,useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{auth:["system:sysMenu:updateSysMenu","system:sysMenu:removeSysMenu"],width:80,title:"\u64CD\u4F5C",dataIndex:"action"},beforeFetch:W});function L(){const n={parentId:h.nodeId};S(!0,{record:n,isUpdate:!1})}function N(n){S(!0,{record:n,isUpdate:!0})}function K(n){return x(this,null,function*(){yield de({ids:n.id}),R.success("\u5220\u9664\u6210\u529F\uFF01"),o("refresh-tree",n.parentId==="0"?void 0:n.parentId)})}function U({isUpdate:n,values:w}){o("refresh-tree",w.parentId)}function W(n){return D(O({},n),{parentId:h.nodeId?h.nodeId:"0"})}function z(){F()}return Z(()=>h.nodeId,()=>{ee(()=>{F()})}),i({refresh:z}),(n,w)=>{const G=te("a-button"),P=oe("auth");return s(),v("div",null,[V(t(ne),{onRegister:t(A)},{toolbar:u(()=>[se((s(),l(G,{type:"primary",onClick:L,preIcon:"ant-design:plus-outlined"},{default:u(()=>[m("\u65B0\u589E")]),_:1})),[[P,["system:sysMenu:addSysMenu"]]])]),bodyCell:u(({column:c,record:e})=>[c.key==="menuType"?(s(),v(C,{key:0},[e.menuType==="dir"?(s(),l(t(f),{key:0,color:"warning"},{default:u(()=>[m(y(t(d)(k.value,e.menuType)),1)]),_:2},1024)):a("",!0),e.menuType==="menu"?(s(),l(t(f),{key:1,color:"processing"},{default:u(()=>[m(y(t(d)(k.value,e.menuType)),1)]),_:2},1024)):a("",!0),e.menuType==="button"?(s(),l(t(f),{key:2,color:"default"},{default:u(()=>[m(y(t(d)(k.value,e.menuType)),1)]),_:2},1024)):a("",!0)],64)):a("",!0),c.key==="icon"?(s(),l(t(ie),{key:1,icon:e.icon},null,8,["icon"])):a("",!0),c.key==="keepalive"?(s(),v(C,{key:2},[e.keepalive?(s(),l(t(f),{key:0,color:e.keepalive==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(T.value,e.keepalive)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="linkExternal"?(s(),v(C,{key:3},[e.linkExternal?(s(),l(t(f),{key:0,color:e.linkExternal==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(I.value,e.linkExternal)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="visible"?(s(),v(C,{key:4},[e.visible?(s(),l(t(f),{key:0,color:e.visible==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(_.value,e.visible)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="frame"?(s(),v(C,{key:5},[e.frame?(s(),l(t(f),{key:0,color:e.frame==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(p.value,e.frame)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="status"?(s(),v(C,{key:6},[e.status?(s(),l(t(f),{key:0,color:e.status==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(g.value,e.status)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="action"?(s(),l(t(re),{key:7,actions:[{auth:["system:sysMenu:updateSysMenu"],icon:"clarity:note-edit-line",tooltip:"\u7F16\u8F91",onClick:N.bind(null,e)},{auth:["system:sysMenu:removeSysMenu"],icon:"ant-design:delete-outlined",tooltip:"\u5220\u9664",color:"error",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:K.bind(null,e)}}]},null,8,["actions"])):a("",!0)]),_:1},8,["onRegister"]),V(ce,{onRegister:t(j),onSuccess:U},null,8,["onRegister"])])}}});export{kt as default};
