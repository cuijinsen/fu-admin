var P=Object.defineProperty,R=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var B=(s,t,o)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,u=(s,t)=>{for(var o in t||(t={}))I.call(t,o)&&B(s,o,t[o]);if(_)for(var o of _(t))L.call(t,o)&&B(s,o,t[o]);return s},w=(s,t)=>R(s,x(t));var g=(s,t,o)=>new Promise((r,p)=>{var l=a=>{try{m(o.next(a))}catch(n){p(n)}},d=a=>{try{m(o.throw(a))}catch(n){p(n)}},m=a=>a.done?r(a.value):Promise.resolve(a.value).then(l,d);m((o=o.apply(s,t)).next())});import{a as S,B as V}from"./index.f1863477.js";import{B as A}from"./BasicForm.05ee908a.js";import{u as E}from"./useForm.f8fae255.js";import{a as G,f as z,i,v as h,aA as D,o as N,j as T,z as y,n as M,aB as W,G as $}from"./index.67a988db.js";import{v as q,a as H,e as J}from"./sysUserApi.1e6b9408.js";import{g as K}from"./index.80508645.js";import"./useWindowSizeFn.4d53064e.js";import"./FullscreenOutlined.a71f1151.js";/* empty css              *//* empty css               */import"./index.c763c491.js";import"./index.475977fd.js";import"./Checkbox.46a1d435.js";import"./index.510f4eba.js";import"./index.c9944a8c.js";import"./index.a722cbfd.js";import"./index.f3227c85.js";import"./index.64075906.js";import"./get.87514043.js";import"./index.848e1eef.js";import"./eagerComputed.841da0b8.js";import"./index.3f00b8d1.js";import"./_baseIteratee.3527c98a.js";import"./DeleteOutlined.cf817082.js";import"./index.0280075c.js";import"./useRefs.ac08b2f5.js";import"./Form.ab29d6a8.js";import"./Col.830be021.js";import"./useFlexGapSupport.72716606.js";import"./useSize.1222867c.js";import"./index.95a0a2ac.js";import"./index.ff6c01e4.js";import"./index.8fb4702c.js";import"./uuid.2b29000c.js";import"./download.cb83b819.js";import"./base64Conver.08b9f4ec.js";import"./index.7034e6c7.js";import"./cropper.bcc4a72c.js";import"./index.253e4730.js";import"./index.5b15cd76.js";import"./index.56a49b73.js";import"./uniqBy.be172303.js";const zo=G({__name:"FormModal",emits:["success","register"],setup(s,{emit:t}){const o=z(()=>i(r)?"\u7F16\u8F91\u7528\u6237":"\u65B0\u589E\u7528\u6237"),r=h(!1),p=h(),{createMessage:l}=$(),[d,{setFieldsValue:m,resetFields:a,validate:n,updateSchema:C}]=E({labelWidth:100,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{lg:12,md:24}}),[b,{setModalProps:f,closeModal:O}]=S(e=>g(this,null,function*(){if(yield a(),f({confirmLoading:!1}),r.value=!!(e!=null&&e.isUpdate),yield C([{field:"password",ifShow:!i(r)}]),i(r)){p.value=e.record.id;const c=yield q({id:e.record.id});yield m(u({},c))}else{const c=yield K({key:"sys_init_password"});yield m({password:c})}}));function U(){return g(this,null,function*(){try{const e=yield n();f({confirmLoading:!0}),i(r)?yield J(w(u({},e),{id:p.value})):yield H(u({},e)),i(r)?l.success("\u7F16\u8F91\u6210\u529F\uFF01"):l.success("\u65B0\u589E\u6210\u529F\uFF01"),O(),t("success",{isUpdate:i(r),values:w(u({},e),{id:p.value})})}finally{f({confirmLoading:!1})}})}return(e,c)=>{const j=D("a-input");return N(),T(i(V),W(e.$attrs,{destroyOnClose:"",onRegister:i(b),title:i(o),onOk:U,width:"900px"}),{address:y(({model:F,field:v})=>[M(j,{value:F[v],"onUpdate:value":k=>F[v]=k},null,8,["value","onUpdate:value"])]),default:y(()=>[M(i(A),{onRegister:i(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"])}}});export{zo as default};
