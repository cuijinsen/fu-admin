import{a,s as e,V as t,e as n,c$ as r,a4 as s,a5 as c,K as l,at as i,J as o,cc as u,S as f,m as v,_ as p,cl as g,T as d}from"./index-d32d699d.js";import{u as m}from"./useSize-e28be3fa.js";import{e as h}from"./eagerComputed-b16e681c.js";const x=a({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:d.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}},slots:["icon"],setup:function(a,d){var x=d.slots,b=d.attrs,y=e(!0),S=e(!1),z=e(1),j=e(null),A=e(null),C=t("avatar",a).prefixCls,E=m(),O=n((function(){return"default"===a.size?E.value:a.size})),H=r(),T=h((function(){if("object"===s(a.size)){var e=c.find((function(a){return H.value[a]}));return a.size[e]}})),W=function(){if(j.value&&A.value){var e=j.value.offsetWidth,t=A.value.offsetWidth;if(0!==e&&0!==t){var n=a.gap,r=void 0===n?4:n;2*r<t&&(z.value=t-2*r<e?(t-2*r)/e:1)}}},w=function(){var e=a.loadError;!1!==(null==e?void 0:e())&&(y.value=!1)};return l((function(){return a.src}),(function(){i((function(){y.value=!0,z.value=1}))})),l((function(){return a.gap}),(function(){i((function(){W()}))})),o((function(){i((function(){W(),S.value=!0}))})),function(){var e,t,n,r,s=a.shape,c=a.src,l=a.alt,i=a.srcset,o=a.draggable,d=a.crossOrigin,m=u(x,a,"icon"),h=C.value,E=(f(e={},"".concat(b.class),!!b.class),f(e,h,!0),f(e,"".concat(h,"-lg"),"large"===O.value),f(e,"".concat(h,"-sm"),"small"===O.value),f(e,"".concat(h,"-").concat(s),s),f(e,"".concat(h,"-image"),c&&y.value),f(e,"".concat(h,"-icon"),m),e),H="number"==typeof O.value?{width:"".concat(O.value,"px"),height:"".concat(O.value,"px"),lineHeight:"".concat(O.value,"px"),fontSize:m?"".concat(O.value/2,"px"):"18px"}:{},N=null===(t=x.default)||void 0===t?void 0:t.call(x);if(c&&y.value)n=v("img",{draggable:o,src:c,srcset:i,onError:w,alt:l,crossorigin:d},null);else if(m)n=m;else if(S.value||1!==z.value){var k="scale(".concat(z.value,") translateX(-50%)"),B={msTransform:k,WebkitTransform:k,transform:k},D="number"==typeof O.value?{lineHeight:"".concat(O.value,"px")}:{};n=v(g,{onResize:W},{default:function(){return[v("span",{class:"".concat(h,"-string"),ref:j,style:p(p({},D),B)},[N])]}})}else n=v("span",{class:"".concat(h,"-string"),ref:j,style:{opacity:0}},[N]);return v("span",p(p({},b),{},{ref:A,class:E,style:[H,(r=!!m,T.value?{width:"".concat(T.value,"px"),height:"".concat(T.value,"px"),lineHeight:"".concat(T.value,"px"),fontSize:"".concat(r?T.value/2:18,"px")}:{}),b.style]}),[n])}}});export{x as A};
