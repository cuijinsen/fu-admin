var $=Object.defineProperty,q=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var E=(r,i,o)=>i in r?$(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o,O=(r,i)=>{for(var o in i||(i={}))J.call(i,o)&&E(r,o,i[o]);if(B)for(var o of B(i))Q.call(i,o)&&E(r,o,i[o]);return r},D=(r,i)=>q(r,H(i));var x=(r,i,o)=>new Promise((h,k)=>{var T=p=>{try{_(o.next(p))}catch(g){k(g)}},I=p=>{try{_(o.throw(p))}catch(g){k(g)}},_=p=>p.done?h(p.value):Promise.resolve(p.value).then(T,I);_((o=o.apply(r,i)).next())});import{a as X,v as b,br as Y,a9 as Z,an as ee,aA as te,bS as oe,o as s,h as v,n as V,z as u,x as se,j as l,B as m,F as C,i as t,t as y,fB as d,k as a,b8 as ie,G as ae}from"./index.7f67491a.js";import{T as f}from"./index.c7d3ad48.js";import{B as ne}from"./TableImg.7860a006.js";import{j as re}from"./BasicForm.1111a937.js";import{u as ue}from"./useTable.5f72d90a.js";import{b as le}from"./index.296b7df0.js";import{c as pe,s as me,_ as ce}from"./FormModal.43cc3f92.js";import{f as ye,r as de}from"./sysMenuApi.67f30176.js";import{s as M}from"./index.f816d15d.js";import"./index.1b4bd88f.js";import"./Checkbox.aea9b5e0.js";import"./index.6a3fee19.js";import"./index.1db504fc.js";import"./eagerComputed.e27f22e8.js";import"./useForm.e97ebf24.js";import"./index.c5711bd7.js";import"./index.f7e77d68.js";import"./index.2d5e9d07.js";import"./useSize.95a68d73.js";import"./useWindowSizeFn.8bbcad12.js";import"./useContentViewHeight.0f7f785e.js";import"./ArrowLeftOutlined.3ff00aee.js";import"./index.a6d90cc9.js";import"./index.1fa128b8.js";import"./index.764a0e1f.js";import"./uuid.2b29000c.js";import"./index.0bcabb8d.js";import"./_baseIteratee.97f9b71e.js";import"./get.c67596ea.js";import"./DeleteOutlined.07ed6de3.js";import"./index.9732cd98.js";import"./useRefs.57e308ad.js";import"./Form.28bc30e2.js";import"./Col.55c72773.js";import"./useFlexGapSupport.b80a92ac.js";import"./index.a655c1dc.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.a420e087.js";import"./FullscreenOutlined.505d9d0b.js";import"./index.e1e5d99d.js";import"./fromPairs.84aabb58.js";import"./scrollTo.c8cf0ab1.js";import"./index.d2dfecd1.js";/* empty css              *//* empty css               */import"./index.531e8692.js";import"./index.04a8cbbf.js";import"./index.3022938f.js";import"./download.d6fee51a.js";import"./base64Conver.08b9f4ec.js";import"./index.beb3d0e1.js";import"./cropper.bcc4a72c.js";import"./index.1037e95f.js";import"./uniqBy.950a4484.js";const kt=X({__name:"index",props:{nodeId:{type:String}},emits:["refresh-tree"],setup(r,{expose:i,emit:o}){const h=r,k=b([]),T=b([]),I=b([]),_=b([]),p=b([]),g=b([]);Y(()=>x(this,null,function*(){k.value=yield M({dictCode:"sys_menu_type"}),T.value=yield M({dictCode:"sys_keepalive"}),I.value=yield M({dictCode:"sys_link_external"}),_.value=yield M({dictCode:"sys_visible"}),p.value=yield M({dictCode:"sys_frame"}),g.value=yield M({dictCode:"sys_status"})}));const{createMessage:R}=ae(),[j,{openModal:S}]=le(),[A,{reload:F}]=ue({title:"\u83DC\u5355\u5217\u8868",api:ye,rowKey:"id",columns:pe,formConfig:{baseColProps:{sm:24,lg:6},labelWidth:90,schemas:me,autoSubmitOnEnter:!0,resetButtonOptions:{preIcon:"ant-design:delete-outlined"},submitButtonOptions:{preIcon:"ant-design:search-outlined"}},showIndexColumn:!1,useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{auth:["system:sysMenu:updateSysMenu","system:sysMenu:removeSysMenu"],width:80,title:"\u64CD\u4F5C",dataIndex:"action"},beforeFetch:W});function L(){const n={parentId:h.nodeId};S(!0,{record:n,isUpdate:!1})}function N(n){S(!0,{record:n,isUpdate:!0})}function K(n){return x(this,null,function*(){yield de({ids:n.id}),R.success("\u5220\u9664\u6210\u529F\uFF01"),o("refresh-tree",n.parentId==="0"?void 0:n.parentId)})}function U({isUpdate:n,values:w}){o("refresh-tree",w.parentId)}function W(n){return D(O({},n),{parentId:h.nodeId?h.nodeId:"0"})}function z(){F()}return Z(()=>h.nodeId,()=>{ee(()=>{F()})}),i({refresh:z}),(n,w)=>{const G=te("a-button"),P=oe("auth");return s(),v("div",null,[V(t(ne),{onRegister:t(A)},{toolbar:u(()=>[se((s(),l(G,{type:"primary",onClick:L,preIcon:"ant-design:plus-outlined"},{default:u(()=>[m("\u65B0\u589E")]),_:1})),[[P,["system:sysMenu:addSysMenu"]]])]),bodyCell:u(({column:c,record:e})=>[c.key==="menuType"?(s(),v(C,{key:0},[e.menuType==="dir"?(s(),l(t(f),{key:0,color:"warning"},{default:u(()=>[m(y(t(d)(k.value,e.menuType)),1)]),_:2},1024)):a("",!0),e.menuType==="menu"?(s(),l(t(f),{key:1,color:"processing"},{default:u(()=>[m(y(t(d)(k.value,e.menuType)),1)]),_:2},1024)):a("",!0),e.menuType==="button"?(s(),l(t(f),{key:2,color:"default"},{default:u(()=>[m(y(t(d)(k.value,e.menuType)),1)]),_:2},1024)):a("",!0)],64)):a("",!0),c.key==="icon"?(s(),l(t(ie),{key:1,icon:e.icon},null,8,["icon"])):a("",!0),c.key==="keepalive"?(s(),v(C,{key:2},[e.keepalive?(s(),l(t(f),{key:0,color:e.keepalive==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(T.value,e.keepalive)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="linkExternal"?(s(),v(C,{key:3},[e.linkExternal?(s(),l(t(f),{key:0,color:e.linkExternal==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(I.value,e.linkExternal)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="visible"?(s(),v(C,{key:4},[e.visible?(s(),l(t(f),{key:0,color:e.visible==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(_.value,e.visible)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="frame"?(s(),v(C,{key:5},[e.frame?(s(),l(t(f),{key:0,color:e.frame==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(p.value,e.frame)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="status"?(s(),v(C,{key:6},[e.status?(s(),l(t(f),{key:0,color:e.status==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(g.value,e.status)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="action"?(s(),l(t(re),{key:7,actions:[{auth:["system:sysMenu:updateSysMenu"],icon:"clarity:note-edit-line",tooltip:"\u7F16\u8F91",onClick:N.bind(null,e)},{auth:["system:sysMenu:removeSysMenu"],icon:"ant-design:delete-outlined",tooltip:"\u5220\u9664",color:"error",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:K.bind(null,e)}}]},null,8,["actions"])):a("",!0)]),_:1},8,["onRegister"]),V(ce,{onRegister:t(j),onSuccess:U},null,8,["onRegister"])])}}});export{kt as default};
