var $=Object.defineProperty,q=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var E=(r,i,o)=>i in r?$(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o,O=(r,i)=>{for(var o in i||(i={}))J.call(i,o)&&E(r,o,i[o]);if(B)for(var o of B(i))Q.call(i,o)&&E(r,o,i[o]);return r},D=(r,i)=>q(r,H(i));var x=(r,i,o)=>new Promise((h,k)=>{var T=p=>{try{_(o.next(p))}catch(g){k(g)}},I=p=>{try{_(o.throw(p))}catch(g){k(g)}},_=p=>p.done?h(p.value):Promise.resolve(p.value).then(T,I);_((o=o.apply(r,i)).next())});import{a as X,v as b,br as Y,a9 as Z,an as ee,aA as te,bS as oe,o as s,h as v,n as V,z as u,x as se,j as l,B as m,F as C,i as t,t as y,fB as d,k as a,b8 as ie,G as ae}from"./index.b74cf1bc.js";import{T as f}from"./index.ea1d2165.js";import{B as ne}from"./TableImg.a6725d76.js";import{j as re}from"./BasicForm.1636ebdd.js";import{u as ue}from"./useTable.0df0234c.js";import{b as le}from"./index.8d73dc63.js";import{c as pe,s as me,_ as ce}from"./FormModal.b53f9ce7.js";import{f as ye,r as de}from"./sysMenuApi.dd131a87.js";import{s as M}from"./index.738e0162.js";import"./index.3c4b54d0.js";import"./Checkbox.e80d61eb.js";import"./index.35afe08d.js";import"./index.3b1d7b49.js";import"./eagerComputed.05d44b0c.js";import"./useForm.454b56eb.js";import"./index.94d6a8fb.js";import"./index.3c1ff6fb.js";import"./index.cb3d1a7e.js";import"./useSize.6193d609.js";import"./useWindowSizeFn.59b3a207.js";import"./useContentViewHeight.e5c7a5a0.js";import"./ArrowLeftOutlined.3eadb42d.js";import"./index.b833bb1c.js";import"./index.5100a9cd.js";import"./index.c17593cf.js";import"./uuid.2b29000c.js";import"./index.d20438cb.js";import"./_baseIteratee.b387a4e9.js";import"./get.ef800ccd.js";import"./DeleteOutlined.58479ebe.js";import"./index.9f1863b7.js";import"./useRefs.3b949e72.js";import"./Form.38c81947.js";import"./Col.d211a93e.js";import"./useFlexGapSupport.2ae4dc05.js";import"./index.76f0947d.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.5e7d45ad.js";import"./FullscreenOutlined.2c5fc800.js";import"./index.8ef9877f.js";import"./fromPairs.84aabb58.js";import"./scrollTo.2cba7252.js";import"./index.2cc6874f.js";/* empty css              *//* empty css               */import"./index.6fc50966.js";import"./index.78b5d5cb.js";import"./index.91d33a28.js";import"./download.cc1448f4.js";import"./base64Conver.08b9f4ec.js";import"./index.97bc65bc.js";import"./cropper.bcc4a72c.js";import"./index.be7c702f.js";import"./uniqBy.7a457808.js";const kt=X({__name:"index",props:{nodeId:{type:String}},emits:["refresh-tree"],setup(r,{expose:i,emit:o}){const h=r,k=b([]),T=b([]),I=b([]),_=b([]),p=b([]),g=b([]);Y(()=>x(this,null,function*(){k.value=yield M({dictCode:"sys_menu_type"}),T.value=yield M({dictCode:"sys_keepalive"}),I.value=yield M({dictCode:"sys_link_external"}),_.value=yield M({dictCode:"sys_visible"}),p.value=yield M({dictCode:"sys_frame"}),g.value=yield M({dictCode:"sys_status"})}));const{createMessage:R}=ae(),[j,{openModal:S}]=le(),[A,{reload:F}]=ue({title:"\u83DC\u5355\u5217\u8868",api:ye,rowKey:"id",columns:pe,formConfig:{baseColProps:{sm:24,lg:6},labelWidth:90,schemas:me,autoSubmitOnEnter:!0,resetButtonOptions:{preIcon:"ant-design:delete-outlined"},submitButtonOptions:{preIcon:"ant-design:search-outlined"}},showIndexColumn:!1,useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{auth:["system:sysMenu:updateSysMenu","system:sysMenu:removeSysMenu"],width:80,title:"\u64CD\u4F5C",dataIndex:"action"},beforeFetch:W});function L(){const n={parentId:h.nodeId};S(!0,{record:n,isUpdate:!1})}function N(n){S(!0,{record:n,isUpdate:!0})}function K(n){return x(this,null,function*(){yield de({ids:n.id}),R.success("\u5220\u9664\u6210\u529F\uFF01"),o("refresh-tree",n.parentId==="0"?void 0:n.parentId)})}function U({isUpdate:n,values:w}){o("refresh-tree",w.parentId)}function W(n){return D(O({},n),{parentId:h.nodeId?h.nodeId:"0"})}function z(){F()}return Z(()=>h.nodeId,()=>{ee(()=>{F()})}),i({refresh:z}),(n,w)=>{const G=te("a-button"),P=oe("auth");return s(),v("div",null,[V(t(ne),{onRegister:t(A)},{toolbar:u(()=>[se((s(),l(G,{type:"primary",onClick:L,preIcon:"ant-design:plus-outlined"},{default:u(()=>[m("\u65B0\u589E")]),_:1})),[[P,["system:sysMenu:addSysMenu"]]])]),bodyCell:u(({column:c,record:e})=>[c.key==="menuType"?(s(),v(C,{key:0},[e.menuType==="dir"?(s(),l(t(f),{key:0,color:"warning"},{default:u(()=>[m(y(t(d)(k.value,e.menuType)),1)]),_:2},1024)):a("",!0),e.menuType==="menu"?(s(),l(t(f),{key:1,color:"processing"},{default:u(()=>[m(y(t(d)(k.value,e.menuType)),1)]),_:2},1024)):a("",!0),e.menuType==="button"?(s(),l(t(f),{key:2,color:"default"},{default:u(()=>[m(y(t(d)(k.value,e.menuType)),1)]),_:2},1024)):a("",!0)],64)):a("",!0),c.key==="icon"?(s(),l(t(ie),{key:1,icon:e.icon},null,8,["icon"])):a("",!0),c.key==="keepalive"?(s(),v(C,{key:2},[e.keepalive?(s(),l(t(f),{key:0,color:e.keepalive==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(T.value,e.keepalive)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="linkExternal"?(s(),v(C,{key:3},[e.linkExternal?(s(),l(t(f),{key:0,color:e.linkExternal==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(I.value,e.linkExternal)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="visible"?(s(),v(C,{key:4},[e.visible?(s(),l(t(f),{key:0,color:e.visible==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(_.value,e.visible)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="frame"?(s(),v(C,{key:5},[e.frame?(s(),l(t(f),{key:0,color:e.frame==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(p.value,e.frame)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="status"?(s(),v(C,{key:6},[e.status?(s(),l(t(f),{key:0,color:e.status==="0"?"processing":"error"},{default:u(()=>[m(y(t(d)(g.value,e.status)),1)]),_:2},1032,["color"])):a("",!0)],64)):a("",!0),c.key==="action"?(s(),l(t(re),{key:7,actions:[{auth:["system:sysMenu:updateSysMenu"],icon:"clarity:note-edit-line",tooltip:"\u7F16\u8F91",onClick:N.bind(null,e)},{auth:["system:sysMenu:removeSysMenu"],icon:"ant-design:delete-outlined",tooltip:"\u5220\u9664",color:"error",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:K.bind(null,e)}}]},null,8,["actions"])):a("",!0)]),_:1},8,["onRegister"]),V(ce,{onRegister:t(j),onSuccess:U},null,8,["onRegister"])])}}});export{kt as default};
