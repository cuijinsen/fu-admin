var e=(e,a,s)=>new Promise(((t,o)=>{var i=e=>{try{n(s.next(e))}catch(a){o(a)}},l=e=>{try{n(s.throw(e))}catch(a){o(a)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,l);n((s=s.apply(e,a)).next())}));import{b as a,B as s}from"./index-b361c612.js";import{a as t,s as o,o as i,i as l,y as n,m as r,h as c,f5 as d,I as u,aG as v,E as m}from"./index-d32d699d.js";import{d as p}from"./productApi-29a579d7.js";const f=t({__name:"AddStock",emits:["success","register"],setup(t,{emit:f}){const y=o(!1),h=o(),g=o(),{createMessage:x}=m(),[_,{setModalProps:j,closeModal:k}]=a((a=>e(this,null,(function*(){j({confirmLoading:!1}),y.value=!!(null==a?void 0:a.isUpdate),h.value=a.record.id}))));function w(){return e(this,null,(function*(){try{j({confirmLoading:!0}),yield p({id:h.value,stock:g.value}),x.success("新增成功！"),k(),f("success",{isUpdate:c(y),values:{id:h.value}})}finally{j({confirmLoading:!1})}}))}return(e,a)=>(i(),l(c(s),v({title:"增加库存",centered:"",destroyOnClose:""},e.$attrs,{onOk:w,onRegister:c(_)}),{default:n((()=>[r(c(d),{compact:""},{default:n((()=>[r(c(u),{value:g.value,"onUpdate:value":a[0]||(a[0]=e=>g.value=e),style:{width:"calc(100%)"}},null,8,["value"])])),_:1})])),_:1},16,["onRegister"]))}});export{f as _};
