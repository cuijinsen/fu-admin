var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,i=(e,t)=>{for(var s in t||(t={}))r.call(t,s)&&n(e,s,t[s]);if(a)for(var s of a(t))o.call(t,s)&&n(e,s,t[s]);return e},l=(e,a)=>t(e,s(a)),c=(e,t,s)=>new Promise(((a,r)=>{var o=e=>{try{i(s.next(e))}catch(t){r(t)}},n=e=>{try{i(s.throw(e))}catch(t){r(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,n);i((s=s.apply(e,t)).next())}));import{b as d,B as p}from"./index-b361c612.js";import{k as u,B as m}from"./useForm-39f6e704.js";import{cR as y,a as f,e as h,h as b,s as g,o as v,i as P,y as x,m as D,aG as j,E as O}from"./index-d32d699d.js";import{s as I}from"./index-2e5c6a76.js";const S=[{title:"字典名称",dataIndex:"dictName"},{title:"字典编码",dataIndex:"dictCode"},{title:"状态",dataIndex:"sysStatus",width:80},{title:"备注",dataIndex:"remarks"}],w=[{field:"dictName",label:"字典名称",component:"Input",componentProps:{placeholder:"请输入字典名称"}},{field:"dictCode",label:"字典编码",component:"Input",componentProps:{placeholder:"请输入字典编码"}}],R=[{field:"dictName",label:"字典名称",component:"Input",required:!0,componentProps:{placeholder:"请输入字典名称",maxlength:100}},{field:"dictCode",label:"字典编码",component:"Input",required:!0,componentProps:{placeholder:"请输入字典编码",maxlength:100}},{field:"sysStatus",label:"状态",component:"ApiRadioGroup",required:!0,componentProps:{api:I,params:{dictCode:"sys_status"}},defaultValue:"0"},{label:"备注",field:"remarks",component:"InputTextArea",componentProps:{placeholder:"请输入备注",maxlength:500}}];function C(e){return y.get({url:"/system/sysDict/selectSysDictWithPage",params:e})}function _(e){return y.post({url:"/system/sysDict/removeSysDict",params:e},{joinParamsToUrl:!0})}function k(e){return y.request({url:"/system/sysDict/exportSysDict",params:e,method:"get",responseType:"blob"},{isReturnNativeResponse:!0})}function q(e){return y.post({url:"/system/sysDict/refreshSysDictCache",params:e})}const F=f({__name:"FormModal",emits:["success","register"],setup(e,{emit:t}){const s=h((()=>b(a)?"编辑字典":"新增字典")),a=g(!1),r=g(),{createMessage:o}=O(),[n,{setFieldsValue:f,resetFields:I,validate:S}]=u({labelWidth:100,schemas:R,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{span:24}}),[w,{setModalProps:C,closeModal:_}]=d((e=>c(this,null,(function*(){if(yield I(),C({confirmLoading:!1}),a.value=!!(null==e?void 0:e.isUpdate),b(a)){r.value=e.record.id;const s=yield(t={id:e.record.id},y.get({url:"/system/sysDict/getSysDict",params:t}));yield f(i({},s))}var t}))));function k(){return c(this,null,(function*(){try{const s=yield S();C({confirmLoading:!0}),b(a)?yield function(e){return y.post({url:"/system/sysDict/updateSysDict",params:e})}(l(i({},s),{id:r.value})):yield(e=i({},s),y.post({url:"/system/sysDict/addSysDict",params:e})),b(a)?o.success("编辑成功！"):o.success("新增成功！"),_(),t("success",{isUpdate:b(a),values:l(i({},s),{id:r.value})})}finally{C({confirmLoading:!1})}var e}))}return(e,t)=>(v(),P(b(p),j(e.$attrs,{onRegister:b(w),title:s.value,onOk:k}),{default:x((()=>[D(b(m),{onRegister:b(n)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}});export{F as _,q as a,S as c,k as e,C as f,_ as r,w as s};
