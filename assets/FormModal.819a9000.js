var P=Object.defineProperty,R=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var B=(s,t,o)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,u=(s,t)=>{for(var o in t||(t={}))I.call(t,o)&&B(s,o,t[o]);if(_)for(var o of _(t))L.call(t,o)&&B(s,o,t[o]);return s},w=(s,t)=>R(s,x(t));var g=(s,t,o)=>new Promise((r,p)=>{var l=a=>{try{m(o.next(a))}catch(n){p(n)}},d=a=>{try{m(o.throw(a))}catch(n){p(n)}},m=a=>a.done?r(a.value):Promise.resolve(a.value).then(l,d);m((o=o.apply(s,t)).next())});import{a as S,B as V}from"./index.e55212df.js";import{B as A}from"./BasicForm.23326f3b.js";import{u as E}from"./useForm.5283242d.js";import{a as G,f as z,i,v as h,aA as D,o as N,j as T,z as y,n as M,aB as W,G as $}from"./index.01016e1b.js";import{v as q,a as H,e as J}from"./sysUserApi.3471c319.js";import{g as K}from"./index.55456fcf.js";import"./useWindowSizeFn.5f64a474.js";import"./FullscreenOutlined.969211bf.js";/* empty css              *//* empty css               */import"./index.44e8fa84.js";import"./index.261e1402.js";import"./Checkbox.0393c1df.js";import"./index.59b7c00c.js";import"./index.ad15f2c8.js";import"./index.b4367855.js";import"./index.be501b20.js";import"./index.499a6f59.js";import"./get.1a35d26d.js";import"./index.703a23e2.js";import"./eagerComputed.19683db9.js";import"./index.b8bb4c84.js";import"./_baseIteratee.c73c9502.js";import"./DeleteOutlined.60895bb2.js";import"./index.d1bfa846.js";import"./useRefs.b8e07b47.js";import"./Form.45f609aa.js";import"./Col.d5380690.js";import"./useFlexGapSupport.0520fe90.js";import"./useSize.368ff12a.js";import"./index.3205f76b.js";import"./index.bb233b92.js";import"./index.b6126e6e.js";import"./uuid.2b29000c.js";import"./download.e8ebbf84.js";import"./base64Conver.08b9f4ec.js";import"./index.2f9433fa.js";import"./cropper.bcc4a72c.js";import"./index.460eb416.js";import"./index.b66e8182.js";import"./index.9ada290f.js";import"./uniqBy.5ad5c6ba.js";const zo=G({__name:"FormModal",emits:["success","register"],setup(s,{emit:t}){const o=z(()=>i(r)?"\u7F16\u8F91\u7528\u6237":"\u65B0\u589E\u7528\u6237"),r=h(!1),p=h(),{createMessage:l}=$(),[d,{setFieldsValue:m,resetFields:a,validate:n,updateSchema:C}]=E({labelWidth:100,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{lg:12,md:24}}),[b,{setModalProps:f,closeModal:O}]=S(e=>g(this,null,function*(){if(yield a(),f({confirmLoading:!1}),r.value=!!(e!=null&&e.isUpdate),yield C([{field:"password",ifShow:!i(r)}]),i(r)){p.value=e.record.id;const c=yield q({id:e.record.id});yield m(u({},c))}else{const c=yield K({key:"sys_init_password"});yield m({password:c})}}));function U(){return g(this,null,function*(){try{const e=yield n();f({confirmLoading:!0}),i(r)?yield J(w(u({},e),{id:p.value})):yield H(u({},e)),i(r)?l.success("\u7F16\u8F91\u6210\u529F\uFF01"):l.success("\u65B0\u589E\u6210\u529F\uFF01"),O(),t("success",{isUpdate:i(r),values:w(u({},e),{id:p.value})})}finally{f({confirmLoading:!1})}})}return(e,c)=>{const j=D("a-input");return N(),T(i(V),W(e.$attrs,{destroyOnClose:"",onRegister:i(b),title:i(o),onOk:U,width:"900px"}),{address:y(({model:F,field:v})=>[M(j,{value:F[v],"onUpdate:value":k=>F[v]=k},null,8,["value","onUpdate:value"])]),default:y(()=>[M(i(A),{onRegister:i(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"])}}});export{zo as default};
