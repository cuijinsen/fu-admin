import{cR as e,a as r,s as t,q as i,d4 as o,K as s,at as a,G as n,aF as d,o as m,f as p,F as c,aI as l,w as f,x as u,m as j,h as b,y as x,z as y,t as g,i as _,j as v}from"./index-d32d699d.js";import{_ as h}from"./DetailModal.vue_vue_type_script_setup_true_lang-d851409f.js";import{u as w,B as C}from"./useTable-ba3fb261.js";import{T as L}from"./useForm-39f6e704.js";import{u as R}from"./index-b361c612.js";import{getColumns as k}from"./data-2e87e0f1.js";import"./index-6d58fe5a.js";import"./index-b0cc5f6c.js";import"./get-8e454bdf.js";import"./index-428eee78.js";import"./eagerComputed-b16e681c.js";import"./css-49036a2d.js";import"./fromPairs-c5e23fef.js";import"./iconUtil-b885d1ac.js";import"./index-22735145.js";import"./index-e84e313c.js";import"./createForOfIteratorHelper-19a6e609.js";import"./index-da1a1de3.js";import"./index-64da741e.js";import"./scrollTo-7d931d9a.js";import"./index-ceb1e509.js";import"./index-e9d5eda1.js";import"./index-2887dac0.js";import"./useSize-e28be3fa.js";import"./useWindowSizeFn-6acabc85.js";import"./useContentViewHeight-295eef1a.js";import"./ArrowLeftOutlined-f42bc447.js";import"./index-9c0d62a6.js";import"./transButton-c20bc4d9.js";import"./index-706c8391.js";import"./index-bf8f159c.js";import"./index-ee500efb.js";import"./index-280a19eb.js";import"./index-b4d18824.js";import"./sortable.esm-871e648d.js";import"./RedoOutlined-481f10d7.js";import"./FullscreenOutlined-091fbcf5.js";import"./index-a72363e5.js";import"./index-f7867750.js";import"./index-6cd0fcd2.js";import"./index-06c8a48f.js";import"./index-cd646f4b.js";import"./_baseIteratee-b178d67d.js";import"./index-fe305bf5.js";import"./index-476a8598.js";import"./useRefs-b0536d84.js";import"./download-29600a9b.js";import"./index-406c2228.js";import"./index-8e2feec8.js";import"./uniqBy-19fec0f2.js";const F={class:"p-4"},T=["src"],E=r({__name:"index",setup(r){const E=t(),I=t([]),{t:A}=i(),D=o(),[O,{setTableData:z}]=w({title:A("sys.errorLog.tableTitle"),columns:k(),actionColumn:{width:80,title:"Action",dataIndex:"action"}}),[B,{openModal:P}]=R();function q(e){E.value=e,P(!0)}function H(){throw new Error("fire vue error!")}function M(){I.value.push(`${(new Date).getTime()}.png`)}function S(){return r=this,t=null,i=function*(){yield e.get({url:"/error"})},new Promise(((e,o)=>{var s=e=>{try{n(i.next(e))}catch(r){o(r)}},a=e=>{try{n(i.throw(e))}catch(r){o(r)}},n=r=>r.done?e(r.value):Promise.resolve(r.value).then(s,a);n((i=i.apply(r,t)).next())}));var r,t,i}return s((()=>D.getErrorLogInfoList),(e=>{a((()=>{z(n(e))}))}),{immediate:!0}),(e,r)=>{const t=d("a-button");return m(),p("div",F,[(m(!0),p(c,null,l(I.value,(e=>f((m(),p("img",{key:e,src:e,alt:""},null,8,T)),[[u,!1]]))),128)),j(h,{info:E.value,onRegister:b(B)},null,8,["info","onRegister"]),j(b(C),{onRegister:b(O),class:"error-handle-table"},{toolbar:x((()=>[j(t,{onClick:H,type:"primary"},{default:x((()=>[y(g(b(A)("sys.errorLog.fireVueError")),1)])),_:1}),j(t,{onClick:M,type:"primary"},{default:x((()=>[y(g(b(A)("sys.errorLog.fireResourceError")),1)])),_:1}),j(t,{onClick:S,type:"primary"},{default:x((()=>[y(g(b(A)("sys.errorLog.fireAjaxError")),1)])),_:1})])),bodyCell:x((({column:e,record:r})=>["action"===e.key?(m(),_(b(L),{key:0,actions:[{label:b(A)("sys.errorLog.tableActionDesc"),onClick:q.bind(null,r)}]},null,8,["actions"])):v("",!0)])),_:1},8,["onRegister"])])}}});export{E as default};
