import{S as e,m as t,a as n,O as a,aq as o,V as l,s as c,e as r,X as i,_ as d,c7 as u,as as s,R as v,T as f,cb as p,aZ as y,a8 as h,K,dV as b,at as x,av as k,Q as m,au as g}from"./index-d32d699d.js";import{r as O,T as w,t as N,e as E,F as A,f as D,c as j,g as S,V as B}from"./iconUtil-b885d1ac.js";function C(n){var a,o=n.dropPosition,l=n.dropLevelOffset,c=n.prefixCls,r=n.indent,i=n.direction,d=void 0===i?"ltr":i,u="ltr"===d?"left":"right",s="ltr"===d?"right":"left",v=(e(a={},u,"".concat(-l*r+4,"px")),e(a,s,0),a);switch(o){case-1:v.top="".concat(-3,"px");break;case 1:v.bottom="".concat(-3,"px");break;default:v.bottom="".concat(-3,"px"),v[u]="".concat(r+4,"px")}return t("div",{style:v,class:"".concat(c,"-drop-indicator")},null)}var H=function(){var e=N();return d(d({},e),{},{showLine:{type:[Boolean,Object],default:void 0},multiple:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandParent:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},checkedKeys:{type:[Array,Object]},defaultCheckedKeys:{type:Array},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},selectable:{type:Boolean,default:void 0},loadedKeys:{type:Array},draggable:{type:Boolean,default:void 0},showIcon:{type:Boolean,default:void 0},icon:{type:Function},switcherIcon:f.any,prefixCls:String,replaceFields:{type:Object},blockNode:{type:Boolean,default:void 0},openAnimation:f.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":Function,"onUpdate:checkedKeys":Function,"onUpdate:expandedKeys":Function})};const P=n({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:a(H(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:["icon","title","switcherIcon","titleRender"],setup:function(n,a){var f=a.attrs,y=a.expose,h=a.emit,K=a.slots;o(!(void 0===n.treeData&&K.default));var b=l("tree",n),x=b.prefixCls,k=b.direction,m=b.virtual,g=c();y({treeRef:g,onNodeExpand:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];null===(e=g.value)||void 0===e||e.onNodeExpand.apply(e,n)},scrollTo:function(e){var t;null===(t=g.value)||void 0===t||t.scrollTo(e)},selectedKeys:r((function(){var e;return null===(e=g.value)||void 0===e?void 0:e.selectedKeys})),checkedKeys:r((function(){var e;return null===(e=g.value)||void 0===e?void 0:e.checkedKeys})),halfCheckedKeys:r((function(){var e;return null===(e=g.value)||void 0===e?void 0:e.halfCheckedKeys})),loadedKeys:r((function(){var e;return null===(e=g.value)||void 0===e?void 0:e.loadedKeys})),loadingKeys:r((function(){var e;return null===(e=g.value)||void 0===e?void 0:e.loadingKeys})),expandedKeys:r((function(){var e;return null===(e=g.value)||void 0===e?void 0:e.expandedKeys}))}),i((function(){p(void 0===n.replaceFields,"Tree","`replaceFields` is deprecated, please use fieldNames instead")}));var N=function(e,t){h("update:checkedKeys",e),h("check",e,t)},E=function(e,t){h("update:expandedKeys",e),h("expand",e,t)},A=function(e,t){h("update:selectedKeys",e),h("select",e,t)};return function(){var a,o=n.showIcon,l=n.showLine,c=n.switcherIcon,r=void 0===c?K.switcherIcon:c,i=n.icon,p=void 0===i?K.icon:i,y=n.blockNode,h=n.checkable,b=n.selectable,D=n.fieldNames,j=void 0===D?n.replaceFields:D,S=n.motion,B=void 0===S?n.openAnimation:S,H=n.itemHeight,P=void 0===H?28:H,T=n.onDoubleclick,F=n.onDblclick,I=d(d(d({},f),u(n,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{},{showLine:Boolean(l),dropIndicatorRender:C,fieldNames:j,icon:p,itemHeight:P}),L=K.default?s(K.default()):void 0;return t(w,d(d({},I),{},{virtual:m.value,motion:B,ref:g,prefixCls:x.value,class:v((a={},e(a,"".concat(x.value,"-icon-hide"),!o),e(a,"".concat(x.value,"-block-node"),y),e(a,"".concat(x.value,"-unselectable"),!b),e(a,"".concat(x.value,"-rtl"),"rtl"===k.value),a),f.class),direction:k.value,checkable:h,selectable:b,switcherIcon:function(e){return O(x.value,r,l,e)},onCheck:N,onExpand:E,onSelect:A,onDblclick:F||T,children:L}),d(d({},K),{},{checkable:function(){return t("span",{class:"".concat(x.value,"-checkbox-inner")},null)}}))}}});const T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){I(e,t,n[t])}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e,n){var a=F({},e,n.attrs);return t(y,F({},a,{icon:T}),null)};L.displayName="FolderOpenOutlined",L.inheritAttrs=!1;const V=L;const U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){z(e,t,n[t])}))}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e,n){var a=M({},e,n.attrs);return t(y,M({},a,{icon:U}),null)};R.displayName="FolderOutlined",R.inheritAttrs=!1;const q=R;var Q,X;function Z(e,t,n){e.forEach((function(e){var a=e[t.key],o=e[t.children];!1!==n(a,e)&&Z(o||[],t,n)}))}function _(e){var t=e.treeData,n=e.expandedKeys,a=e.startKey,o=e.endKey,l=e.fieldNames,c=void 0===l?{title:"title",key:"key",children:"children"}:l,r=[],i=Q.None;if(a&&a===o)return[a];if(!a||!o)return[];return Z(t,c,(function(e){if(i===Q.End)return!1;if(function(e){return e===a||e===o}(e)){if(r.push(e),i===Q.None)i=Q.Start;else if(i===Q.Start)return i=Q.End,!1}else i===Q.Start&&r.push(e);return-1!==n.indexOf(e)})),r}function G(e,t,n){var a=h(t),o=[];return Z(e,n,(function(e,t){var n=a.indexOf(e);return-1!==n&&(o.push(t),a.splice(n,1)),!!a.length})),o}(X=Q||(Q={}))[X.None=0]="None",X[X.Start=1]="Start",X[X.End=2]="End";var J=["icon","blockNode"];function W(e){var n=e.isLeaf,a=e.expanded;return t(n?A:a?V:q,null,null)}const Y=n({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:a(d(d({},H()),{},{expandAction:{type:[Boolean,String]}}),{showIcon:!0,expandAction:"click"}),slots:["icon","title","switcherIcon","titleRender"],setup:function(n,a){var o,i=a.attrs,u=a.slots,f=a.emit,p=a.expose,y=c(n.treeData||E(s(null===(o=u.default)||void 0===o?void 0:o.call(u))));K((function(){return n.treeData}),(function(){y.value=n.treeData})),b((function(){x((function(){var e;void 0===n.treeData&&u.default&&(y.value=E(s(null===(e=u.default)||void 0===e?void 0:e.call(u))))}))}));var g=c(),O=c(),w=r((function(){return D(n.fieldNames)})),N=c();p({scrollTo:function(e){var t;null===(t=N.value)||void 0===t||t.scrollTo(e)},selectedKeys:r((function(){var e;return null===(e=N.value)||void 0===e?void 0:e.selectedKeys})),checkedKeys:r((function(){var e;return null===(e=N.value)||void 0===e?void 0:e.checkedKeys})),halfCheckedKeys:r((function(){var e;return null===(e=N.value)||void 0===e?void 0:e.halfCheckedKeys})),loadedKeys:r((function(){var e;return null===(e=N.value)||void 0===e?void 0:e.loadedKeys})),loadingKeys:r((function(){var e;return null===(e=N.value)||void 0===e?void 0:e.loadingKeys})),expandedKeys:r((function(){var e;return null===(e=N.value)||void 0===e?void 0:e.expandedKeys}))});var A,B=c(n.selectedKeys||n.defaultSelectedKeys||[]),C=c((A=j(y.value,{fieldNames:w.value}).keyEntities,n.defaultExpandAll?Object.keys(A):n.defaultExpandParent?S(n.expandedKeys||n.defaultExpandedKeys||[],A):n.expandedKeys||n.defaultExpandedKeys));K((function(){return n.selectedKeys}),(function(){void 0!==n.selectedKeys&&(B.value=n.selectedKeys)}),{immediate:!0}),K((function(){return n.expandedKeys}),(function(){void 0!==n.expandedKeys&&(C.value=n.expandedKeys)}),{immediate:!0});var H=k((function(e,t){t.isLeaf||e.shiftKey||e.metaKey||e.ctrlKey||N.value.onNodeExpand(e,t)}),200,{leading:!0}),T=function(e,t){void 0===n.expandedKeys&&(C.value=e),f("update:expandedKeys",e),f("expand",e,t)},F=function(e,t){"click"===n.expandAction&&H(e,t),f("click",e,t)},I=function(e,t){var a=n.expandAction;"dblclick"!==a&&"doubleclick"!==a||H(e,t),f("doubleclick",e,t),f("dblclick",e,t)},L=function(e,t){var a,o=n.multiple,l=t.node,c=t.nativeEvent,r=l[w.value.key],i=d(d({},t),{},{selected:!0}),u=(null==c?void 0:c.ctrlKey)||(null==c?void 0:c.metaKey),s=null==c?void 0:c.shiftKey;o&&u?(a=e,g.value=r,O.value=a,i.selectedNodes=G(y.value,a,w.value)):o&&s?(a=Array.from(new Set([].concat(h(O.value||[]),h(_({treeData:y.value,expandedKeys:C.value,startKey:r,endKey:g.value,fieldNames:w.value}))))),i.selectedNodes=G(y.value,a,w.value)):(a=[r],g.value=r,O.value=a,i.selectedNodes=G(y.value,a,w.value)),f("update:selectedKeys",a),f("select",a,i),void 0===n.selectedKeys&&(B.value=a)},V=function(e,t){f("update:checkedKeys",e),f("check",e,t)},U=l("tree",n),M=U.prefixCls,z=U.direction;return function(){var a=v("".concat(M.value,"-directory"),e({},"".concat(M.value,"-directory-rtl"),"rtl"===z.value),i.class),o=n.icon,l=void 0===o?u.icon:o,c=n.blockNode,r=void 0===c||c,s=m(n,J);return t(P,d(d(d({},i),{},{icon:l||W,ref:N,blockNode:r},s),{},{prefixCls:M.value,class:a,expandedKeys:C.value,selectedKeys:B.value,onSelect:L,onClick:F,onDblclick:I,onExpand:T,onCheck:V}),u)}}});var $=B;const ee=g(P,{DirectoryTree:Y,TreeNode:$,install:function(e){return e.component(P.name,P),e.component($.name,$),e.component(Y.name,Y),e}});export{ee as T};
