var P=Object.defineProperty,R=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var B=(s,t,o)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,u=(s,t)=>{for(var o in t||(t={}))I.call(t,o)&&B(s,o,t[o]);if(_)for(var o of _(t))L.call(t,o)&&B(s,o,t[o]);return s},w=(s,t)=>R(s,x(t));var g=(s,t,o)=>new Promise((r,p)=>{var l=a=>{try{m(o.next(a))}catch(n){p(n)}},d=a=>{try{m(o.throw(a))}catch(n){p(n)}},m=a=>a.done?r(a.value):Promise.resolve(a.value).then(l,d);m((o=o.apply(s,t)).next())});import{a as S,B as V}from"./index.8d73dc63.js";import{B as A}from"./BasicForm.1636ebdd.js";import{u as E}from"./useForm.454b56eb.js";import{a as G,f as z,i,v as h,aA as D,o as N,j as T,z as y,n as M,aB as W,G as $}from"./index.b74cf1bc.js";import{v as q,a as H,e as J}from"./sysUserApi.b2c3fd9f.js";import{g as K}from"./index.738e0162.js";import"./useWindowSizeFn.59b3a207.js";import"./FullscreenOutlined.2c5fc800.js";/* empty css              *//* empty css               */import"./index.76f0947d.js";import"./index.3c4b54d0.js";import"./Checkbox.e80d61eb.js";import"./index.35afe08d.js";import"./index.ea1d2165.js";import"./index.5100a9cd.js";import"./index.c17593cf.js";import"./index.6fc50966.js";import"./get.ef800ccd.js";import"./index.3b1d7b49.js";import"./eagerComputed.05d44b0c.js";import"./index.d20438cb.js";import"./_baseIteratee.b387a4e9.js";import"./DeleteOutlined.58479ebe.js";import"./index.9f1863b7.js";import"./useRefs.3b949e72.js";import"./Form.38c81947.js";import"./Col.d211a93e.js";import"./useFlexGapSupport.2ae4dc05.js";import"./useSize.6193d609.js";import"./index.78b5d5cb.js";import"./index.91d33a28.js";import"./index.8ef9877f.js";import"./uuid.2b29000c.js";import"./download.cc1448f4.js";import"./base64Conver.08b9f4ec.js";import"./index.97bc65bc.js";import"./cropper.bcc4a72c.js";import"./index.cb3d1a7e.js";import"./index.b833bb1c.js";import"./index.be7c702f.js";import"./uniqBy.7a457808.js";const zo=G({__name:"FormModal",emits:["success","register"],setup(s,{emit:t}){const o=z(()=>i(r)?"\u7F16\u8F91\u7528\u6237":"\u65B0\u589E\u7528\u6237"),r=h(!1),p=h(),{createMessage:l}=$(),[d,{setFieldsValue:m,resetFields:a,validate:n,updateSchema:C}]=E({labelWidth:100,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{lg:12,md:24}}),[b,{setModalProps:f,closeModal:O}]=S(e=>g(this,null,function*(){if(yield a(),f({confirmLoading:!1}),r.value=!!(e!=null&&e.isUpdate),yield C([{field:"password",ifShow:!i(r)}]),i(r)){p.value=e.record.id;const c=yield q({id:e.record.id});yield m(u({},c))}else{const c=yield K({key:"sys_init_password"});yield m({password:c})}}));function U(){return g(this,null,function*(){try{const e=yield n();f({confirmLoading:!0}),i(r)?yield J(w(u({},e),{id:p.value})):yield H(u({},e)),i(r)?l.success("\u7F16\u8F91\u6210\u529F\uFF01"):l.success("\u65B0\u589E\u6210\u529F\uFF01"),O(),t("success",{isUpdate:i(r),values:w(u({},e),{id:p.value})})}finally{f({confirmLoading:!1})}})}return(e,c)=>{const j=D("a-input");return N(),T(i(V),W(e.$attrs,{destroyOnClose:"",onRegister:i(b),title:i(o),onOk:U,width:"900px"}),{address:y(({model:F,field:v})=>[M(j,{value:F[v],"onUpdate:value":k=>F[v]=k},null,8,["value","onUpdate:value"])]),default:y(()=>[M(i(A),{onRegister:i(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"])}}});export{zo as default};
